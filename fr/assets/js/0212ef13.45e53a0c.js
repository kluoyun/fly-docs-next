"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["64310"],{49678:function(e,n,i){i.d(n,{ZP:()=>o,d$:()=>s});var r=i(85893),t=i(50065);let s=[{value:"Configuration",id:"configuration",level:2},{value:"D\xe9sactiver l&#39;extinction automatique lors d&#39;une coupure de courant",id:"d\xe9sactiver-lextinction-automatique-lors-dune-coupure-de-courant",level:3},{value:"Fichier de configuration plr.cfg",id:"fichier-de-configuration-plrcfg",level:3},{value:"Test",id:"test",level:2}];function c(e){let n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components},{ImageView:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ImageView",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"d\xe9sactiver-lextinction-automatique-lors-dune-coupure-de-courant",children:"D\xe9sactiver l'extinction automatique lors d'une coupure de courant"}),"\n",(0,r.jsx)(n.admonition,{title:"Avertissement",type:"danger",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Il est n\xe9cessaire de d\xe9sactiver l'extinction automatique lors d'une coupure de courant, sinon la fonction de reprise apr\xe8s panne ne pourra pas \xeatre utilis\xe9e."}),"\n",(0,r.jsx)(n.li,{children:"La fonction de reprise apr\xe8s panne comporte une fonctionnalit\xe9 de sauvegarde des progr\xe8s suivie d'une extinction automatique."}),"\n"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\xc0 travers la barre d'adresse du navigateur, entrez l'adresse IP du p\xe9riph\xe9rique, par exemple : ",(0,r.jsx)(n.code,{children:"http://192.168.6.179"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Acc\xe9dez \xe0 la page de configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ouvrez l'adresse IP du p\xe9riph\xe9rique dans le navigateur, par exemple : ",(0,r.jsx)(n.code,{children:"http://192.168.1.2/"})]}),"\n",(0,r.jsx)(n.li,{children:"Fluidd : d\xe9cochez l'option indiqu\xe9e \xe0 gauche dans la capture d'\xe9cran -> \xab Filtrer les fichiers et dossiers cach\xe9s \xbb."}),"\n",(0,r.jsx)(n.li,{children:"Mainsail : cochez l'option indiqu\xe9e \xe0 droite dans la capture d'\xe9cran -> \xab Afficher les fichiers cach\xe9s \xbb."}),"\n"]}),"\n",(0,r.jsx)("table",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s,{image:i(53814).Z,size:"100%",align:"center"})}),(0,r.jsx)("td",{children:(0,r.jsx)(s,{image:i(37312).Z,size:"85%",align:"center"})})]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Vous verrez alors le dossier ",(0,r.jsx)(n.code,{children:".flyos-config"}),". Entrez dans ce dossier pour trouver le fichier ",(0,r.jsx)(n.code,{children:"sys-config.conf"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Le fichier ",(0,r.jsx)(n.code,{children:"sys-config.conf"})," est un lien symbolique vers le fichier de configuration ",(0,r.jsx)(n.code,{children:"config.txt"})," du disque amovible ",(0,r.jsx)(n.code,{children:"FlyOS-Conf"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s,{image:i(78153).Z,size:"60%",align:"center"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ouvrez le fichier ",(0,r.jsx)(n.code,{children:"sys-config.conf"})," et recherchez les configurations ",(0,r.jsx)(n.code,{children:"shutdown_pin_state"})," et ",(0,r.jsx)(n.code,{children:"shutdown_pin="}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Ajoutez un ",(0,r.jsx)(n.code,{children:"#"})," devant ces configurations."]}),"\n",(0,r.jsxs)(n.li,{children:["Ensuite, ",(0,r.jsx)(n.code,{children:"Enregistrez"})," -> ",(0,r.jsx)(n.code,{children:"Fermez"})," puis red\xe9marrez le syst\xe8me."]}),"\n"]}),"\n",(0,r.jsx)(s,{image:i(16493).Z,size:"90%",align:"center"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"fichier-de-configuration-plrcfg",children:"Fichier de configuration plr.cfg"}),"\n",(0,r.jsx)(n.admonition,{title:"Avertissement",type:"danger",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Veuillez remplacer dans le fichier de configuration : (PINS)"}),"\n",(0,r.jsxs)(n.li,{children:["Par ",(0,r.jsx)("code",{children:e.power_pine})]}),"\n"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dans la page de configuration de l'imprimante, trouvez le fichier ",(0,r.jsx)(n.code,{children:"plr.cfg"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Effacez tout son contenu, puis collez la configuration ci-dessous :"}),"\n",(0,r.jsx)(n.li,{children:"Le contenu du fichier de configuration est le suivant :"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cfg",children:"[mcu host]   \nserial: /tmp/klipper_host_mcu\n\n[power_loss_resume]\npower_pin: (PINS)\nis_shutdown: True # Ex\xe9cuter ou non l'op\xe9ration d'arr\xeat, activ\xe9 par d\xe9faut\npaused_recover_z: -2.0 # Si l'impression est en pause au moment de la coupure, la distance de d\xe9placement Z pendant la reprise, par d\xe9faut sans mouvement\nstart_gcode:\n    # G-code ex\xe9cut\xe9 avant de commencer la reprise\n    # Tous les param\xe8tres sauvegard\xe9s avant la coupure peuvent \xeatre r\xe9cup\xe9r\xe9s via {PLR}\n    # Utilisez M118 {PLR} pour afficher tous les param\xe8tres disponibles\n    M118 D\xe9but de la reprise : {PLR.print_stats.filename}\n    M118 Position d'interruption : X:[{PLR.POS_X}] Y:[{PLR.POS_Y}] Z:[{PLR.POS_Z}] E:[{PLR.POS_E}]\n    M140 S{PLR.bed.target}      ; D\xe9finir la temp\xe9rature du lit chauffant\n    M104 S{PLR.extruder.target-10}  ; D\xe9finir la temp\xe9rature de l'extrudeur\n    M109 S{PLR.extruder.target-10}  ; Attendre que l'extrudeur atteigne la temp\xe9rature d\xe9finie\n    G91                             ; Coordonn\xe9es relatives\n    G1 Z2 F100                      ; Soulever Z, pr\xe9parer le retour \xe0 z\xe9ro X,Y\n    G90                             ; Coordonn\xe9es absolues\n    G28 X Y                         ; R\xe9initialiser X et Y \xe0 z\xe9ro\n    M140 S{PLR.bed.target}          ; D\xe9finir la temp\xe9rature du lit chauffant\n    M104 S{PLR.extruder.target}     ; D\xe9finir la temp\xe9rature de l'extrudeur\n    M190 S{PLR.bed.target}          ; Attendre que le lit chauffant atteigne la temp\xe9rature d\xe9finie\n    M109 S{PLR.extruder.target}     ; Attendre que l'extrudeur atteigne la temp\xe9rature d\xe9finie\n    M83                             ; Mode d'extraction relatif\n    # G1 E0.5 F400                  ; Extrusion l\xe9g\xe8re\nlayer_count: 2 # Nombre de couches \xe0 imprimer avant d'ex\xe9cuter layer_change_gcode\nlayer_change_gcode:                \n    # G-code \xe0 ex\xe9cuter apr\xe8s avoir imprim\xe9 {layer_count} couches\n    M118 Reprise de la vitesse d'impression\n    M106 S{PLR.fan_speed}             ; Allumer le ventilateur de refroidissement\n    M220 S{PLR.move_speed_percent}    ; D\xe9finir le pourcentage de vitesse demand\xe9e\n    M221 S{PLR.extrude_speed_percent} ; D\xe9finir le pourcentage de vitesse d'extraction demand\xe9\nshutdown_gcode:\n    # G-code \xe0 ex\xe9cuter avant l'extinction\n    M118 Alimentation faible, extinction\n    # M112 ; Arr\xeat d'urgence\n\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Attention",type:"warning",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Le macro ",(0,r.jsx)(n.code,{children:"start_gcode"})," dans le fichier de configuration ci-dessus peut n\xe9cessiter des ajustements selon les sp\xe9cificit\xe9s de votre machine."]}),"\n",(0,r.jsxs)(n.li,{children:["Notez que si vous utilisez ",(0,r.jsx)(n.code,{children:"[homing_override]"}),", il est d\xe9conseill\xe9 de modifier arbitrairement les positions de repositionnement dans ",(0,r.jsx)(n.code,{children:"[homing_override]"}),". Les \xe9checs de reprise apr\xe8s panne ne seront pas pris en charge."]}),"\n",(0,r.jsxs)(n.li,{children:["Notez \xe9galement que si vous utilisez ",(0,r.jsx)(n.code,{children:"[gcode_macro _CLIENT_VARIABLE]"}),", veillez \xe0 rechercher la variable ",(0,r.jsx)(n.code,{children:"variable_custom_park_dz"})," et \xe0 la d\xe9finir sur 0.\n`"]}),"\n"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Enregistrez le fichier de configuration ci-dessus."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Ouvrez le fichier ",(0,r.jsx)(n.code,{children:"printer.cfg"})," et ajoutez le contenu suivant au d\xe9but du fichier :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cfg",children:"\n[include plr.cfg]\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Cliquez sur le bouton de sauvegarde en haut \xe0 droite puis red\xe9marrez le syst\xe8me."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\xc0 ce stade, la fonction de reprise apr\xe8s panne de Klipper est configur\xe9e."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"test",children:"Test"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Imprimez un fichier quelconque, et pendant l'impression, appuyez sur le bouton \"Arr\xeat d'urgence\" pour simuler une coupure de courant."}),"\n",(0,r.jsx)(n.li,{children:'Appuyez ensuite sur "Red\xe9marrage du firmware", attendez que Klipper se reconnecte normalement.'}),"\n",(0,r.jsx)(n.li,{children:"Si une fen\xeatre de notification appara\xeet sur le site web ou dans KlipperScreen, cela signifie que la fonction de reprise apr\xe8s panne fonctionne correctement."}),"\n",(0,r.jsx)(n.li,{children:"Vous pouvez tester ult\xe9rieurement une situation r\xe9elle de coupure de courant."}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},45211:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>o,default:()=>p,toc:()=>a,metadata:()=>r,assets:()=>l,contentTitle:()=>d});var r=JSON.parse('{"id":"ProductDoc/MainBoard/fly-c/fly-c5/kppm","title":"Fonction de reprise d\'impression apr\xe8s coupure d\'alimentation de Klipper","description":"- La fonction de reprise d\'impression apr\xe8s coupure d\'alimentation de Klipper consiste \xe0 permettre \xe0 Klipper, apr\xe8s une coupure d\'alimentation et une nouvelle mise sous tension, de restaurer automatiquement l\'\xe9tat d\'impression de Klipper.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-c/fly-c5/kppm.mdx","sourceDirName":"ProductDoc/MainBoard/fly-c/fly-c5","slug":"/ProductDoc/MainBoard/fly-c/fly-c5/kppm","permalink":"/fly-docs-next/fr/docs/ProductDoc/MainBoard/fly-c/fly-c5/kppm","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-c/fly-c5/kppm.mdx","tags":[],"version":"current","lastUpdatedBy":"FengHua741","lastUpdatedAt":1749473164000,"sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"PONTAGE CAN","permalink":"/fly-docs-next/fr/docs/ProductDoc/MainBoard/fly-c/fly-c5/canbridge"},"next":{"title":"Configuration et c\xe2blage de l\'\xe9cran","permalink":"/fly-docs-next/fr/docs/ProductDoc/MainBoard/fly-c/fly-c5/screen"}}'),t=i(85893),s=i(50065),c=i(49678);let o={sidebar_position:11},d="Fonction de reprise d'impression apr\xe8s coupure d'alimentation de Klipper",l={},a=[...c.d$];function u(e){let n={h1:"h1",header:"header",li:"li",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"fonction-de-reprise-dimpression-apr\xe8s-coupure-dalimentation-de-klipper",children:"Fonction de reprise d'impression apr\xe8s coupure d'alimentation de Klipper"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"La fonction de reprise d'impression apr\xe8s coupure d'alimentation de Klipper consiste \xe0 permettre \xe0 Klipper, apr\xe8s une coupure d'alimentation et une nouvelle mise sous tension, de restaurer automatiquement l'\xe9tat d'impression de Klipper."}),"\n",(0,t.jsx)(n.li,{children:"C5 peut \xeatre utilis\xe9 sans KPPM"}),"\n",(0,t.jsx)(n.li,{children:"Non compatible avec les mod\xe8les dont l'axe Z se d\xe9place en cas de panne de courant."}),"\n"]}),"\n",(0,t.jsx)(c.ZP,{power_pine:"!host:gpiochip0/gpio260"})]})}function p(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},53814:function(e,n,i){i.d(n,{Z:()=>r});let r=i.p+"assets/images/config1-b248a5f8708754391dc7f3e30a66404d.webp"},37312:function(e,n,i){i.d(n,{Z:()=>r});let r=i.p+"assets/images/config2-520ef43d21da10584cea2f864bbbbdd6.webp"},78153:function(e,n,i){i.d(n,{Z:()=>r});let r=i.p+"assets/images/config3-cc5cacbc1d4d230fea0fd0968df0de03.webp"},16493:function(e,n,i){i.d(n,{Z:()=>r});let r=i.p+"assets/images/kppm-09c682d81587988ea2224ef3724f04d5.webp"},50065:function(e,n,i){i.d(n,{Z:()=>o,a:()=>c});var r=i(67294);let t={},s=r.createContext(t);function c(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([[61770],{46274:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>_,contentTitle:()=>g,default:()=>N,frontMatter:()=>w,metadata:()=>t,toc:()=>P});const t=JSON.parse('{"id":"ToolsDoc/firmware-parser","title":"Klipper \u56fa\u4ef6\u89e3\u6790\u5668","description":"\u8be5\u5de5\u5177\u53ef\u4ee5\u4ece Klipper \u56fa\u4ef6 .bin, .uf2, .dict, .elf \u4e2d\u63d0\u53d6\u6784\u5efa\u4fe1\u606f\u7b49\u53c2\u6570 (\u5efa\u8bae\u4ecePC\u7aef\u8bbf\u95ee\u83b7\u5f97\u66f4\u4f73\u4f53\u9a8c)","source":"@site/docs/ToolsDoc/firmware-parser.mdx","sourceDirName":"ToolsDoc","slug":"/ToolsDoc/firmware-parser","permalink":"/fly-docs-next/de/docs/ToolsDoc/firmware-parser","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ToolsDoc/firmware-parser.mdx","tags":[],"version":"current","lastUpdatedBy":"Xiaok","lastUpdatedAt":1718265676000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"toolsdocSidebar","previous":{"title":"\u5b9e\u7528\u5de5\u5177","permalink":"/fly-docs-next/de/docs/tools"},"next":{"title":"Fly-Tools","permalink":"/fly-docs-next/de/docs/category/fly-tools"}}');var s=r(86070),i=r(15658),l=r(30758),a=r(66537),d=r(95838),o=r(61706),c=r(4661),h=r(1804),x=r(17066),p=r(13004),f=r(58979),j=r(63815),u=r(34532);const A="#9DA8B7",m="#303740",y=(0,f.A)("div")((e=>{let{theme:n}=e;return`\n    border-radius: 12px;\n    border: 2px solid ${"dark"===n.palette.mode?m:A};\n    overflow: hidden;\n\n    table {\n      font-family: 'IBM Plex Sans', sans-serif;\n      font-size: 1rem;\n      border-collapse: collapse;\n      border-radius: 12px;\n      border: 0px;\n      width: 100%;\n      margin: 0px;\n    }\n  \n    td,\n    th {\n      border: 1px solid ${"dark"===n.palette.mode?m:A};\n      text-align: left;\n      padding: 10px;\n    }\n  \n    @media screen and (max-width: 600px) {\n        th, td {\n            width: auto; /* \u5728\u5c0f\u5c4f\u5e55\u4e0a\u81ea\u52a8\u8c03\u6574\u5bbd\u5ea6 */\n        }\n    }\n    `})),S=(0,f.A)(a.A)({p:2,border:"4px dashed grey",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",textAlign:"center",minHeight:"100px",minWidth:"300px",transition:"border-color 0.3s, background-color 0.3s","&.highlight":{borderColor:"blue",backgroundColor:"lightblue",zIndex:99999999}}),b=(0,f.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),E=()=>{const[e,n]=(0,l.useState)(null),r=(0,l.useRef)(null),[t,i]=(0,l.useState)({snackbarisOpen:!1,snackbarMsg:""}),{snackbarisOpen:f,snackbarMsg:A}=t,[m,E]=(0,l.useState)(!1),[w,g]=(0,l.useState)(null),[_,P]=(0,l.useState)([]),[R,N]=(0,l.useState)([]),[I,O]=(0,l.useState)([]),[U,v]=(0,l.useState)([]),B=e=>{i({snackbarisOpen:!0,snackbarMsg:e})},C=e=>{const n=[];for(let r=0;r<e.length;r+=2)n.push(parseInt(e.slice(r,r+2),16));return new Uint8Array(n)},D=e=>Array.prototype.map.call(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(""),W=e=>{try{const n=new FileReader;n.onload=async()=>{const e=n.result,r=new Uint8Array(e);var t=D(r),i=t.indexOf("78da9d");if(-1==i&&(i=t.indexOf("78da")),-1==i)return t.indexOf("43616e426f6f74")>0?void B((0,s.jsx)(u.A,{children:"\u4e0d\u652f\u6301\u89e3\u6790 CanBoot(Katapult) \u56fa\u4ef6"})):void B((0,s.jsx)(u.A,{children:"BIN\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x01"}));var l=t.indexOf("020000000002",i);if(-1==l&&(l=t.indexOf("0000000000",i)),-1!=l){t=t.slice(i,l);var a=C(t);try{const e=j.Ay.inflate(a),n=(new TextDecoder).decode(e);g(JSON.parse(n))}catch(d){console.error("\u89e3\u538b\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef:",d),B((0,s.jsx)(u.A,{children:"\u6570\u636e\u5904\u7406\u5931\u8d25,0x01"}))}}else B((0,s.jsx)(u.A,{children:"BIN\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x02"}))},n.readAsArrayBuffer(e)}catch(n){console.error(n),B((0,s.jsx)(u.A,{children:"Bin\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x0f"}))}};return(0,l.useEffect)((()=>{if(null==e||null==e||!e)return;g(null),P([]),N([]),O([]),v([]);const n=e.name.toLowerCase();n.endsWith(".bin")||n.endsWith(".uf2")||n.endsWith(".dict")||n.endsWith(".elf")?!n.endsWith(".elf")&&e.size>2097152?B((0,s.jsx)(u.A,{children:"\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e2M"})):n.endsWith(".elf")&&e.size>5242880?B((0,s.jsx)(u.A,{children:"elf\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e5M"})):(B((0,s.jsx)(u.A,{children:"\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u8bf7\u7a0d\u540e"})),n.endsWith(".bin")?W(e):n.endsWith(".uf2")?(e=>{try{const n=new FileReader;n.onload=async()=>{const e=n.result,r=new Uint8Array(e);var t=D(r),i=(t=(t=t.replace(/00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000/g,"")).replace(/306fb10a5546320a57515d9e.*?56ff8be4/g,"")).indexOf("78da9d");if(-1==i&&(i=t.indexOf("78da")),-1==i)return t.indexOf("43616e426f6f74")>0?void B((0,s.jsx)(u.A,{children:"\u4e0d\u652f\u6301\u89e3\u6790 CanBoot(Katapult) \u56fa\u4ef6"})):void B((0,s.jsx)(u.A,{children:"UF2\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x01"}));var l=t.indexOf("020000000002",i);if(-1==l&&(l=t.indexOf("0000000000",i)),-1!=l){t=t.slice(i,l);var a=C(t);try{const e=j.Ay.inflate(a),n=(new TextDecoder).decode(e);g(JSON.parse(n))}catch(d){console.error("\u89e3\u538b\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef:",d),B((0,s.jsx)(u.A,{children:"\u6570\u636e\u5904\u7406\u5931\u8d25,0x01"}))}}else B((0,s.jsx)(u.A,{children:"UF2\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x02"}))},n.readAsArrayBuffer(e)}catch(n){console.error(n),B((0,s.jsx)(u.A,{children:"UF2\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x0f"}))}})(e):n.endsWith(".dict")?(e=>{try{const n=new FileReader;n.onload=async()=>{const e=n.result,r=new Uint8Array(e),t=(new TextDecoder).decode(r);g(JSON.parse(t))},n.readAsArrayBuffer(e)}catch(n){console.error(n),B((0,s.jsx)(u.A,{children:"DICT\u6587\u4ef6\u89e3\u6790\u9519\u8bef,0x0f"}))}})(e):n.endsWith(".elf")?W(e):B((0,s.jsx)(u.A,{children:"\u6587\u4ef6\u89e3\u6790\u9519\u8bef\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6587\u4ef6"}))):B((0,s.jsx)(u.A,{children:"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u9009\u62e9.bin/.uf2/.dict/.elf\u6587\u4ef6"}))}),[e]),(0,l.useEffect)((()=>{if(w&&null!=w&&null!=w&&w!={})if(w.hasOwnProperty("app")&&w.hasOwnProperty("version")){if(w.hasOwnProperty("app")&&P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"APP\u7a0b\u5e8f"}),info:w.app}])),w.hasOwnProperty("license")&&P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u8bb8\u53ef\u534f\u8bae"}),info:w.license}])),w.hasOwnProperty("version")){const n=w.version.match(/-g([0-9a-f]{8})/i);var e="";n&&n[1]&&w.version.indexOf("dirty")<0&&(e=n[1]),P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"\u56fa\u4ef6\u7248\u672c"}),info:e?w.version.replace(e,"<a href='https://github.com/Klipper3d/klipper/commit/"+e+"' target='_blank'>"+e+"</a>"):w.version}]))}if(w.hasOwnProperty("build_versions ")&&P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u5de5\u5177\u94fe\u7248\u672c"}),info:w.build_versions}])),w.hasOwnProperty("config")){const e=w.config;if(e.hasOwnProperty("MCU")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"\u4e3b\u63a7\u578b\u53f7"}),info:e.MCU.toUpperCase()}])),e.hasOwnProperty("CLOCK_FREQ")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"\u4e3b\u63a7\u9891\u7387"}),info:e.CLOCK_FREQ/1e6+"MHz"}])),e.hasOwnProperty("RESERVE_PINS_USB")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"USB\u5f15\u811a"}),info:`DM:${e.RESERVE_PINS_USB.split(",")[0]},  DP:${e.RESERVE_PINS_USB.split(",")[1]}`}])),e.hasOwnProperty("RESERVE_PINS_CAN")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"CAN\u5f15\u811a"}),info:`RX:${e.RESERVE_PINS_CAN.split(",")[0]},  TX:${e.RESERVE_PINS_CAN.split(",")[1]}`}])),e.hasOwnProperty("CANBUS_FREQUENCY")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"CAN\u901f\u7387"}),info:`${e.CANBUS_FREQUENCY} Kbps`}])),e.hasOwnProperty("RESERVE_PINS_serial")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"UART\u5f15\u811a"}),info:`RX:${e.RESERVE_PINS_serial.split(",")[0]},  TX:${e.RESERVE_PINS_serial.split(",")[1]}`}])),e.hasOwnProperty("SERIAL_BAUD")&&P((n=>[...n,{name:(0,s.jsx)(u.A,{children:"UART\u901f\u7387"}),info:`${e.SERIAL_BAUD} bps`}])),!e.hasOwnProperty("RESERVE_PINS_USB")||e.hasOwnProperty("RESERVE_PINS_serial")||e.hasOwnProperty("RESERVE_PINS_CAN")?e.hasOwnProperty("RESERVE_PINS_serial")||e.hasOwnProperty("SERIAL_BAUD")&&!e.hasOwnProperty("RESERVE_PINS_USB")&&!e.hasOwnProperty("RESERVE_PINS_CAN")?P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u901a\u4fe1\u65b9\u5f0f"}),info:(0,s.jsx)(u.A,{children:"\u8be5\u56fa\u4ef6\u4f7f\u7528\u4e32\u53e3UART\u4e0e\u4e0a\u4f4d\u673a\u901a\u4fe1"})}])):e.hasOwnProperty("RESERVE_PINS_USB")||e.hasOwnProperty("RESERVE_PINS_serial")||!e.hasOwnProperty("RESERVE_PINS_CAN")?e.hasOwnProperty("RESERVE_PINS_USB")&&!e.hasOwnProperty("RESERVE_PINS_serial")&&e.hasOwnProperty("RESERVE_PINS_CAN")&&e.hasOwnProperty("CANBUS_BRIDGE")&&"1"==e.CANBUS_BRIDGE&&P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u901a\u4fe1\u65b9\u5f0f"}),info:(0,s.jsx)(u.A,{children:"\u8be5\u56fa\u4ef6\u4f7f\u7528USB\u6865\u63a5CANBus\u4e0e\u4e0a\u4f4d\u673a\u901a\u4fe1"})}])):P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u901a\u4fe1\u65b9\u5f0f"}),info:(0,s.jsx)(u.A,{children:"\u8be5\u56fa\u4ef6\u4f7f\u7528CANBus\u4e0e\u4e0a\u4f4d\u673a\u901a\u4fe1"})}])):P((e=>[...e,{name:(0,s.jsx)(u.A,{children:"\u901a\u4fe1\u65b9\u5f0f"}),info:(0,s.jsx)(u.A,{children:"\u8be5\u56fa\u4ef6\u4f7f\u7528USB\u4e0e\u4e0a\u4f4d\u673a\u901a\u4fe1"})}])),e.hasOwnProperty("INITIAL_PINS")){var n=e.INITIAL_PINS.split(",");n?.forEach((e=>{N((n=>[...n,{pin:e.startsWith("!")?e.substring(1):e,state:e.startsWith("!")?"LOW":"HIGH"}]))}))}Object.entries(e).map((e=>{let[n,r]=e;if(n.startsWith("BUS_PINS_spi")){var t=n.replace("BUS_PINS_",""),s=r.split(",");O((e=>[...e,{bus:t,miso:s[0],mosi:s[1],sck:s[2]}]))}else if(n.startsWith("BUS_PINS_i2c")){t=n.replace("BUS_PINS_",""),s=r.split(",");v((e=>[...e,{bus:t,sda:s[0],scl:s[1]}]))}}))}B((0,s.jsx)(u.A,{children:"\u56fa\u4ef6\u89e3\u6790\u5b8c\u6210"}))}else B((0,s.jsx)(u.A,{children:"\u6587\u4ef6\u89e3\u6790\u9519\u8bef\uff0c\u7f3a\u5c11\u5fc5\u8981\u5b57\u6bb5"}))}),[w]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{children:(0,s.jsx)(S,{component:"section",className:m?"highlight":"",onDrop:e=>{e.preventDefault(),E(!1);const r=e.dataTransfer.files[0];r&&n(r)},onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.preventDefault(),E(!0)},onDragLeave:e=>{e.preventDefault(),E(!1)},children:(0,s.jsxs)(o.A,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,s.jsx)(p.A,{}),children:["Upload file",(0,s.jsx)(b,{type:"file",accept:".bin,.uf2,.dict,.elf",onChange:e=>{if(e.target.files.lenght>1)return void B((0,s.jsx)(u.A,{children:"\u4e0d\u652f\u6301\u591a\u6587\u4ef6\u89e3\u6790\uff0c\u8bf7\u9009\u62e9\u5355\u4e2a\u6587\u4ef6"}));if(e.target.files.lenght<1)return void B((0,s.jsx)(u.A,{children:"\u8bf7\u9009\u62e9\u6587\u4ef6"}));const r=e.target.files[0];n(r)},ref:r})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(h.A,{variant:"middle"}),(0,s.jsx)("br",{}),(0,s.jsxs)(a.A,{width:"100%",component:"section",sx:{p:2},children:[_.length>0&&(0,s.jsx)(y,{children:(0,s.jsxs)("table",{style:{tableLayout:"fixed",width:"100%",minWidth:"100%"},"aria-label":"custom pagination table",children:[(0,s.jsx)("caption",{children:(0,s.jsx)(u.A,{children:"\u56fa\u4ef6\u914d\u7f6e"})}),(0,s.jsx)("thead",{style:{maxWidth:"100%",width:"100%"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"auto",minWidth:"100px"},children:"Name"}),(0,s.jsx)("th",{style:{width:"100%"},align:"right",children:"Info"})]})}),(0,s.jsx)("tbody",{children:_.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{dangerouslySetInnerHTML:{__html:e.info}})]},e.name)))})]})}),R.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(y,{children:(0,s.jsxs)("table",{style:{tableLayout:"fixed",width:"100%",minWidth:"100%"},"aria-label":"custom pagination table",children:[(0,s.jsx)("caption",{children:(0,s.jsx)(u.A,{children:"\u521d\u59cb\u5f15\u811a\u914d\u7f6e"})}),(0,s.jsx)("thead",{style:{maxWidth:"100%",width:"100%"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"auto",minWidth:"100px"},children:"Pin"}),(0,s.jsx)("th",{style:{width:"100%"},align:"right",children:"State"})]})}),(0,s.jsx)("tbody",{children:R.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.pin}),(0,s.jsx)("td",{children:"HIGH"===e.state?(0,s.jsx)(x.A,{label:e.state,size:"small",color:"success"}):(0,s.jsx)(x.A,{label:e.state,size:"small",color:"primary"})})]},e.pin)))})]})})]}),I.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(y,{children:(0,s.jsxs)("table",{style:{tableLayout:"fixed",width:"100%",minWidth:"100%"},"aria-label":"custom pagination table",children:[(0,s.jsx)("caption",{children:(0,s.jsx)(u.A,{children:"\u786c\u4ef6SPI\u901a\u9053\u914d\u7f6e"})}),(0,s.jsx)("thead",{style:{maxWidth:"100%",width:"100%"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"auto",minWidth:"100px"},children:"Bus"}),(0,s.jsx)("th",{style:{width:"30%"},align:"right",children:"Miso"}),(0,s.jsx)("th",{style:{width:"30%"},align:"right",children:"Mosi"}),(0,s.jsx)("th",{style:{width:"30%"},align:"right",children:"Sck"})]})}),(0,s.jsx)("tbody",{children:I.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.bus}),(0,s.jsx)("td",{children:e.miso}),(0,s.jsx)("td",{children:e.mosi}),(0,s.jsx)("td",{children:e.sck})]},e.bus)))})]})})]}),U.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(y,{children:(0,s.jsxs)("table",{style:{tableLayout:"fixed",width:"100%",minWidth:"100%"},"aria-label":"custom pagination table",children:[(0,s.jsx)("caption",{children:(0,s.jsx)(u.A,{children:"\u786c\u4ef6I2C\u901a\u9053\u914d\u7f6e"})}),(0,s.jsx)("thead",{style:{maxWidth:"100%",width:"100%"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"auto",minWidth:"100px"},children:"Bus"}),(0,s.jsx)("th",{style:{width:"50%"},align:"right",children:"Sda"}),(0,s.jsx)("th",{style:{width:"50%"},align:"right",children:"Scl"})]})}),(0,s.jsx)("tbody",{children:U.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.bus}),(0,s.jsx)("td",{children:e.sda}),(0,s.jsx)("td",{children:e.scl})]},e.bus)))})]})})]})]}),(0,s.jsx)(c.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:f,message:A})]})},w={sidebar_position:1},g="Klipper \u56fa\u4ef6\u89e3\u6790\u5668",_={},P=[];function R(e){const n={admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"klipper-\u56fa\u4ef6\u89e3\u6790\u5668",children:"Klipper \u56fa\u4ef6\u89e3\u6790\u5668"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u8be5\u5de5\u5177\u53ef\u4ee5\u4ece Klipper \u56fa\u4ef6 ",(0,s.jsx)(n.code,{children:".bin"}),", ",(0,s.jsx)(n.code,{children:".uf2"}),", ",(0,s.jsx)(n.code,{children:".dict"}),", ",(0,s.jsx)(n.code,{children:".elf"})," \u4e2d\u63d0\u53d6\u6784\u5efa\u4fe1\u606f\u7b49\u53c2\u6570 (\u5efa\u8bae\u4ecePC\u7aef\u8bbf\u95ee\u83b7\u5f97\u66f4\u4f73\u4f53\u9a8c)"]})}),"\n","\n",(0,s.jsx)(E,{})]})}function N(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(R,{...e})}):R(e)}}}]);
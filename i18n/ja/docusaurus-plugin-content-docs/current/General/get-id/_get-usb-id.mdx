## USBチュートリアルの検索

## デバイスを検索する前の注意事項

    * USB IDを検索する前に、まず[SSHに接続](/docs/DebugDoc/BasicTutorial/index.mdx "クリックしてジャンプ")してください
    * シリアルポートではなくネットワーク経由でSSHに接続していることを確認してください
    * 刷り込み済みのUSBファームウェアが搭載されたメインボードが接続されており、上位機とのデータ転送機能を持つデータケーブルを使用していることを確認してください

## デバイスの検索
    * 上位機が正常にインターネットに接続できており、下位機が上位機に接続されたデータケーブルにデータ転送機能があることを確認してください。
    * SSHで上位機に接続したら、コマンドラインに`lsusb`と入力してエンターキーを押します。図中の丸で囲まれた情報が出力された場合、次のステップに進んでください。
        * 何も情報が返ってこない場合は、上位機のシステムに問題があります。この場合、正常なシステムに変更したり、上位機を交換してください。
        * `lsusb`コマンドがないというメッセージが出た場合は、以下のコマンドを実行してインストールできます
            ```bash
            sudo apt-get install usbutils
            ```
            <ImageView image={require('@site/docs/General/get-id/img/6177.webp').default} size="80%" align="left" /> 
    * `1d50:6177`は今回使用するデバイスです。
        * 一部の上位機はシステムの問題により、完全に表示されないか全く表示されないことがあります。
        * `lsusb`コマンドでデバイスが表示されるが、`1d50:6177`が表示されない場合は、データケーブルを交換し、メインボードを上位機の他のUSBポートに接続してみてください。
    * 前述の手順を実行し、Klipperファームウェアを正常に焼込めており、メインボードが正常に動作しているが、Klipperファームウェアを更新するだけの場合、右側のメニューにある「ファームウェア更新」セクションをご覧ください。

    :::warning 注意
       `1d50:6177`デバイスが検出された後で初めて次のステップに進んでください
    :::

## USBIDの検索

    ```bash
    ls /dev/serial/by-id/*
    ```

    * 下記のコマンドを入力してエンターキーを押します。すべて正常であれば、青色のIDが一行表示されます。（以下は例です）
    <ImageView image={require('@site/docs/General/get-id/img/usb-id.webp').default} size="80%" align="left" />
    * 下記のコマンドを入力してもIDが出力されない場合、`lsusb`にはデバイスが表示されているが、上位機または上位機のシステムを交換してください

:::warning 注意
複数のIDが表示された場合、MCUモデルに基づいて対応するIDを選択してください。
:::

### USBのIDを設定ファイルに入力する

    * プリンターのWebインターフェースを開き、左側のサイドバーの設定オプションで、fluiddでは`{…}`、mainsailでは`マシン`をクリックすると、`printer.cfg`を見つけることができます。

        <ImageView image={require('@site/docs/General/get-id/img/fluidd-cfg.webp').default} size="50%" align="left" />

    * 青色のIDをコピーし、`printer.cfg`設定ファイル内の`[mcu]`セクションの`serial:`に入力します。保存して再起動すると、メインボードに接続できます。Klipperが`ADC out of range`と表示するのは正常現象です。ヒータやセンサーを正しく接続し、ノズルやヒーターの温度センサおよび出力ピンを適切に設定してから、再度保存して再起動してください。

            <ImageView image={require('@site/docs/General/get-id/img/cfg-usb-id.webp').default} size="50%" align="left" />

:::danger
注意：文中に登場するすべてのIDは例示であり、実際の各メインボードのIDは異なりますので、実際の取得したIDに基づいて修正してください。
:::

"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["69174"],{73917:function(e,n,i){i.d(n,{ZP:function(){return o},d$:function(){return s}});var r=i(52676),l=i(79938);let s=[{value:"DSI Usage",id:"dsi-usage",level:2}];function t(e){let n={code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,l.a)(),...e.components},{ImageView:s}=n;return!s&&function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ImageView",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"dsi-usage",children:"DSI Usage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"After the image writing is completed, enter /boot/config.txt and add the following command"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cfg",children:"dtoverlay=vc4-kms-dsi-7inch\n"})}),"\n",(0,r.jsx)(s,{image:i(75699).Z,size:"100%",align:"left"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Save and exit"}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},25615:function(e,n,i){i.r(n),i.d(n,{metadata:()=>r,contentTitle:()=>a,default:()=>f,assets:()=>h,toc:()=>u,frontMatter:()=>c});var r=JSON.parse('{"id":"ProductDoc/MainBoard/fly-pro/fly-pro-x10/screen","title":"Screen Usage","description":"","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-pro/fly-pro-x10/screen.mdx","sourceDirName":"ProductDoc/MainBoard/fly-pro/fly-pro-x10","slug":"/ProductDoc/MainBoard/fly-pro/fly-pro-x10/screen","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/screen","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/screen.mdx","tags":[],"version":"current","lastUpdatedBy":"Xiaok","lastUpdatedAt":1732265789000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"sidebar_label":"Screen Usage"},"sidebar":"tutorialSidebar","previous":{"title":"CSI Camera Usage","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/csi"},"next":{"title":"PRO X10 Bridge CAN","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/canbridge"}}'),l=i("52676"),s=i("79938"),t=i("73917");function o(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"precautions",children:"Precautions:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensure the main unit is powered off before installing the expansion board."}),"\n",(0,l.jsx)(n.li,{children:"Avoid using the expansion board in damp or dusty environments."}),"\n",(0,l.jsx)(n.li,{children:"When installing the screen, please note not to plug and unplug it while powered on. Pay attention to the direction of the screen cable to avoid damage."}),"\n",(0,l.jsx)(n.li,{children:"When installing the fan, pay attention to the current and voltage specifications of the fan to avoid damage."}),"\n",(0,l.jsx)(n.li,{children:"Note that UART1 is already enabled by default and does not need to be configured."}),"\n",(0,l.jsxs)(n.li,{children:["Please flash the latest image, such as ",(0,l.jsx)(n.code,{children:"mainsailos"}),", instead of upgrading the kernel."]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"The Raspberry Pi can use all interfaces!!!"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," The system kernel version used by the Raspberry Pi must be greater than ",(0,l.jsx)(n.code,{children:"5.17.x"}),". Run the command ",(0,l.jsx)(n.code,{children:"uname -r"})," to check the kernel version."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"download-link-for-pre-installed-tftv2-system-for-raspberry-pi",children:"Download Link for Pre-installed TFTV2 System for Raspberry Pi"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"System image for Raspberry Pi 3B/3B+/4B/CM4/5B"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cfg",children:"https://cdn.mellow.klipper.cn/IMG/Beta/RPI-TFT-IMG-new.img.xz\n"})}),"\n",(0,l.jsx)(n.h2,{id:"installation-of-screen-driver",children:"Installation of Screen Driver"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Note that you can directly use the pre-installed system."}),"\n",(0,l.jsxs)(n.li,{children:["Project address: ",(0,l.jsx)(n.a,{href:"https://github.com/kluoyun/FLY-TFT",children:"FLY-TFT"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,l.jsx)(n.p,{children:"FLY-TFT-V2 is a TFT LCD screen based on st7796, supporting both capacitive touch and resistive touch, with a resolution of 320x480, using SPI interface."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["You need to install ",(0,l.jsx)(n.a,{href:"https://klipperscreen.readthedocs.io/en/latest/Installation/",children:"KlipperScreen"})," yourself."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"system-installation",children:"System Installation"}),"\n",(0,l.jsx)(n.admonition,{title:"Precautions",type:"warning",children:(0,l.jsxs)(n.p,{children:["Note: The system kernel version used by the Raspberry Pi must be greater than ",(0,l.jsx)(n.code,{children:"5.17.x"}),". Run the command ",(0,l.jsx)(n.code,{children:"uname -r"})," to check the kernel version.\nPlease flash the latest image, such as ",(0,l.jsx)(n.code,{children:"mainsailos"}),", instead of upgrading the kernel."]})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.a,{href:"https://www.raspberrypi.com/software/",children:"Raspberry Imager"})," to install the latest ",(0,l.jsx)(n.strong,{children:"MainsailOS"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Download and install ",(0,l.jsx)(n.a,{href:"https://www.raspberrypi.com/software/",children:"Raspberry Imager"})]}),"\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.strong,{children:"Raspberry Imager"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"CHOOSE DEVICE"})]}),"\n",(0,l.jsx)(n.li,{children:"Select the corresponding model according to your device"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"CHOOSE OS"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Other specific-purpose OS"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"3D printing"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Mainsail OS"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select the latest version. If your settings support 64-bit systems, choose ",(0,l.jsx)(n.strong,{children:"rpi64"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"CHOOSE STORAGE"})]}),"\n",(0,l.jsx)(n.li,{children:"Select your storage device, such as an SD card"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"NEXT"}),", wait for installation to complete"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"driver-installation",children:"Driver Installation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Install FLY-TFT-V2 driver"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/kluoyun/FLY-TFT.git\ncd FLY-TFT\nsudo chmod +x ./scripts/install.sh\n./scripts/install.sh\n"})}),"\n",(0,l.jsx)(n.h3,{id:"enabling-tft-display",children:"Enabling TFT Display"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Touch requires enabling I2C support, the corresponding configuration is ",(0,l.jsx)(n.code,{children:"dtparam=i2c_arm=on"})]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["After installing the driver, add the overlay support ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2"})," to the config.txt file"]}),"\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.code,{children:"/boot/config.txt"})," (for bookworm system, it's ",(0,l.jsx)(n.code,{children:"/boot/firmware/config.txt"}),")","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo nano /boot/config.txt\n"})}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Add the following configuration at the end of the file"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"    dtoverlay=fly-tft-v2\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"By default, the screen displays horizontally at 90 degrees. If you need to rotate the screen, use the following configuration"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"    dtoverlay=fly-tft-v2,r90  # 90 degrees horizontal, same as default orientation\n    dtoverlay=fly-tft-v2,r270 # 270 degrees horizontal, flipped\n    dtoverlay=fly-tft-v2,r0   # 0 degrees vertical, portrait\n    dtoverlay=fly-tft-v2,r180 # 180 degrees vertical, flipped\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Only one configuration can be added, multiple configurations cannot be added"}),"\n",(0,l.jsx)(n.li,{children:"Normally, the touch direction of the TFT will automatically follow the display direction without modifying the touch configuration in the system"}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["After adding to the end of the file, run the command ",(0,l.jsx)(n.code,{children:"sudo reboot"})," to restart the system"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"using-tft",children:"Using TFT"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensure the hardware connection is correct"}),"\n",(0,l.jsx)(n.li,{children:"The driver has been installed"}),"\n",(0,l.jsxs)(n.li,{children:["Added ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2"})," overlay support to the ",(0,l.jsx)(n.code,{children:"/boot/config.txt"})," (for bookworm system, it's ",(0,l.jsx)(n.code,{children:"/boot/firmware/config.txt"}),") file"]}),"\n",(0,l.jsx)(n.li,{children:"Some systems may have a default fb0 device, FLY-TFT will be assigned to the fb1 device. You need to modify the configuration file to enable the fb1 device"}),"\n",(0,l.jsxs)(n.li,{children:["Run the command ",(0,l.jsx)(n.code,{children:"ls /dev/fb*"})," to view the device. If two devices, fb0 and fb1, appear, run the following command to enable the fb1 device (by default it is fb0)"]}),"\n",(0,l.jsxs)(n.li,{children:["Run the following command to modify the default configuration to the fb1 device","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo sed -i 's/\\/dev\\/fb0/\\/dev\\/fb1/g' /etc/X11/xorg.conf.d/99-fbdev.conf\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"using-klipperscreen",children:"Using KlipperScreen"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"KlipperScreen is not installed by default in MainsailOS and needs to be installed manually"}),"\n",(0,l.jsxs)(n.li,{children:["Refer to ",(0,l.jsx)(n.a,{href:"https://github.com/KlipperScreen/KlipperScreen",children:"KlipperScreen"})," or use ",(0,l.jsx)(n.a,{href:"https://github.com/dw-0/kiauh",children:"kiauh"})," to install"]}),"\n",(0,l.jsx)(n.li,{children:"If KlipperScreen is successfully installed and step 5 is correctly completed, the KlipperScreen interface should now be displayed"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"all-available-configurations",children:"All Available Configurations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"speed"})," [",(0,l.jsx)(n.strong,{children:"requires parameter"}),"]: Set the maximum SPI clock frequency for the TFT, in Hz. Default is 96000000. If severe screen artifacts occur, reduce this value appropriately."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,speed=80000000"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"r0/r90/r180/r270"})," [",(0,l.jsx)(n.strong,{children:"optional"}),"][",(0,l.jsx)(n.strong,{children:"no parameter required"}),"]: Set the display and touch direction of the TFT. Default is 90 degrees. Possible values are 0, 90, 180, 270 (only one configuration can be added)."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,r90"})," or ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,r180"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"disable_touch"})," [",(0,l.jsx)(n.strong,{children:"no parameter required"}),"]: Disable the touch function of the TFT. Default is enabled."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,disable_touch"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"invx"}),",",(0,l.jsx)(n.code,{children:"invy"})," [",(0,l.jsx)(n.strong,{children:"no parameter required"}),"]: Set the touch direction of the TFT. ",(0,l.jsx)(n.code,{children:"invx"})," flips the X direction, ",(0,l.jsx)(n.code,{children:"invy"})," flips the Y direction."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,invx"})," or ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,invy"})," or ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,invx,invy"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"swapxy"})," [",(0,l.jsx)(n.strong,{children:"no parameter required"}),"]: Set the touch direction of the TFT. Swap the X and Y axes, i.e., rotate the screen horizontally."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,swapxy"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," Multiple parameters can be set simultaneously (optional parameters can only select one). Multiple parameters should be separated by commas and can only be set on one line."]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Warning:"})," Normally, only ",(0,l.jsx)(n.code,{children:"r0"}),", ",(0,l.jsx)(n.code,{children:"r90"}),", ",(0,l.jsx)(n.code,{children:"r180"}),", ",(0,l.jsx)(n.code,{children:"r270"})," parameters are used. Other parameters are only used in special cases, especially ",(0,l.jsx)(n.code,{children:"invx"}),", ",(0,l.jsx)(n.code,{children:"invy"}),", ",(0,l.jsx)(n.code,{children:"swapxy"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Example: ",(0,l.jsx)(n.code,{children:"dtoverlay=fly-tft-v2,speed=80000000,r270"})]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}let c={sidebar_position:8,sidebar_label:"Screen Usage"},a="Screen Usage",h={},u=[...t.d$,{value:"Precautions:",id:"precautions",level:2},{value:"Download Link for Pre-installed TFTV2 System for Raspberry Pi",id:"download-link-for-pre-installed-tftv2-system-for-raspberry-pi",level:2},{value:"Installation of Screen Driver",id:"installation-of-screen-driver",level:2},{value:"Introduction",id:"introduction",level:3},{value:"System Installation",id:"system-installation",level:3},{value:"Driver Installation",id:"driver-installation",level:3},{value:"Enabling TFT Display",id:"enabling-tft-display",level:3},{value:"Using TFT",id:"using-tft",level:3},{value:"Using KlipperScreen",id:"using-klipperscreen",level:3},{value:"All Available Configurations",id:"all-available-configurations",level:3}];function x(e){let n={h1:"h1",header:"header",...(0,s.a)(),...e.components},{ImageView:r,TabItem:o,Tabs:c}=n;return!r&&p("ImageView",!0),!o&&p("TabItem",!0),!c&&p("Tabs",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"screen-usage",children:"Screen Usage"})}),"\n",(0,l.jsxs)(c,{children:[(0,l.jsx)(o,{value:"HDMI",label:"LCD HDMI Screen Usage",default:!0,children:(0,l.jsx)(r,{image:i(34153).Z,size:"100%",align:"left"})}),(0,l.jsxs)(o,{value:"DSI",label:"LCD DSI Screen Usage",children:[(0,l.jsx)(r,{image:i(24778).Z,size:"100%",align:"left"}),(0,l.jsx)(t.ZP,{})]}),(0,l.jsxs)(o,{value:"TFT",label:"Use TFT Screen with G2T",children:[(0,l.jsx)(r,{image:i(13385).Z,size:"100%",align:"left"}),(0,l.jsx)(d,{})]})]})]})}function f(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(x,{...e})}):x(e)}function p(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},75699:function(e,n,i){i.d(n,{Z:function(){return r}});let r=i.p+"assets/images/dsi-75c93341f72ec076930d2fada92d3679.webp"},24778:function(e,n,i){i.d(n,{Z:function(){return r}});let r=i.p+"assets/images/csi-6db79e157c94efdd5b5e1ab113a9f984.webp"},34153:function(e,n,i){i.d(n,{Z:function(){return r}});let r=i.p+"assets/images/hdmi-e76e53a141e4ff6add79c61e8f706cd1.webp"},13385:function(e,n,i){i.d(n,{Z:function(){return r}});let r=i.p+"assets/images/tft-38284717776f82b79c2db19498a12ab8.webp"},79938:function(e,n,i){i.d(n,{Z:function(){return o},a:function(){return t}});var r=i(75271);let l={},s=r.createContext(l);function t(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);
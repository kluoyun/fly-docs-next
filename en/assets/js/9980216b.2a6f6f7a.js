"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([[22230],{66212:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"DebugDoc/faq/klipper-directives","title":"Common Debug Commands","description":"* This tutorial is based on the Fuiidd web page","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/DebugDoc/faq/klipper-directives.mdx","sourceDirName":"DebugDoc/faq","slug":"/DebugDoc/faq/klipper-directives","permalink":"/fly-docs-next/en/docs/DebugDoc/faq/klipper-directives","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/DebugDoc/faq/klipper-directives.mdx","tags":[],"version":"current","lastUpdatedBy":"XiaoK","lastUpdatedAt":1730539595000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"debugdocSidebar","previous":{"title":"Common Error Messages","permalink":"/fly-docs-next/en/docs/DebugDoc/faq/klipper-err"},"next":{"title":"TMC Error Related","permalink":"/fly-docs-next/en/docs/DebugDoc/faq/tmc"}}');var s=i(86070),t=i(15658),l=i(63436),c=i(61706);const a={sidebar_position:2},d="Common Debug Commands",o={},h=[{value:"Driver Related",id:"driver-related",level:2},{value:"Check Driver Status",id:"check-driver-status",level:3},{value:"Force Move Drivers",id:"force-move-drivers",level:3},{value:"Force Set Print Head Distance",id:"force-set-print-head-distance",level:3},{value:"Step Motor Step Value Calibration",id:"step-motor-step-value-calibration",level:3},{value:"Heating Related",id:"heating-related",level:2},{value:"PID",id:"pid",level:3},{value:"Temperature Error Related",id:"temperature-error-related",level:3},{value:"Limit Switch Related",id:"limit-switch-related",level:2},{value:"Normal Limit Switch",id:"normal-limit-switch",level:3},{value:"No Limit Switch",id:"no-limit-switch",level:3},{value:"Probe Related",id:"probe-related",level:2},{value:"BL-TOUCH",id:"bl-touch",level:3},{value:"Probe &amp; TAP",id:"probe--tap",level:3},{value:"Repeatability Accuracy",id:"repeatability-accuracy",level:3},{value:"Special Types",id:"special-types",level:2},{value:"Servo",id:"servo",level:3}];function p(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"common-debug-commands",children:"Common Debug Commands"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"This tutorial is based on the Fuiidd web page"}),"\n",(0,s.jsx)(n.li,{children:"This tutorial is for debugging purposes after the printer has been properly connected."}),"\n",(0,s.jsx)(n.li,{children:"This tutorial provides commonly used commands, but due to various issues, it may not be completely comprehensive."}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"driver-related",children:"Driver Related"}),"\n",(0,s.jsx)(n.admonition,{title:"Notice",type:"danger",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Please note that malfunctioning or improperly configured drivers cannot be checked."}),"\n",(0,s.jsx)(n.li,{children:"Ensure all drivers, power supply, motherboard, and driver jumpers and configurations are correct!!"}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"check-driver-status",children:"Check Driver Status"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["This command verifies the status of TMC drivers in SPI/UART mode.","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"DUMP_TMC STEPPER=stepper_x\nDUMP_TMC STEPPER=stepper_x1\nDUMP_TMC STEPPER=stepper_y\nDUMP_TMC STEPPER=stepper_y1\nDUMP_TMC STEPPER=stepper_z\nDUMP_TMC STEPPER=stepper_z1\nDUMP_TMC STEPPER=stepper_z2\nDUMP_TMC STEPPER=stepper_z3\nDUMP_TMC STEPPER=extruder\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"force-move-drivers",children:"Force Move Drivers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the following command in ",(0,s.jsx)(n.code,{children:"printer.cfg"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[force_move]\nenable_force_move: true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Force back-and-forth movement by 1mm."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"STEPPER_BUZZ STEPPER=stepper_x\nSTEPPER_BUZZ STEPPER=stepper_x1\nSTEPPER_BUZZ STEPPER=stepper_y\nSTEPPER_BUZZ STEPPER=stepper_y1\nSTEPPER_BUZZ STEPPER=stepper_z\nSTEPPER_BUZZ STEPPER=stepper_z1\nSTEPPER_BUZZ STEPPER=stepper_z2\nSTEPPER_BUZZ STEPPER=stepper_z3\nSTEPPER_BUZZ STEPPER=extruder\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Enable this option to force move through movement control."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Please note that only one motor can be moved at a time."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If multiple axes are involved, such as two Z axes, they need to be homed before controlling."}),"\n",(0,s.jsx)(l.A,{image:i(37736).A,size:"80%",align:"center"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"force-set-print-head-distance",children:"Force Set Print Head Distance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Enter the following command in the console to force set the print head position and directly control the movement.","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"SET_KINEMATIC_POSITION x=100 y=100 z=100\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-motor-step-value-calibration",children:"Step Motor Step Value Calibration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["First ensure the extruder driver is functioning correctly, then confirm that ",(0,s.jsx)(n.code,{children:"full_steps_per_rotation"})," and ",(0,s.jsx)(n.code,{children:"gear_ratio"})," are correct; otherwise, extruder step value calibration will fail."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Obtain the new ",(0,s.jsx)(n.code,{children:"rotation_distance"}),", rounding it to three decimal places."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Calibrate the step value: ",(0,s.jsx)(n.code,{children:"rotation_distance = old_rotation_distance * actual_extrusion_length / requested_extrusion_length"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"full_steps_per_rotation: 200        # Number of pulses per rotation (200 for 1.8\xb0, 400 for 0.9\xb0)\ngear_ratio: 50:10                   # Gear ratio (Galileo gear ratio 7.5:1, comment out this line; BMG 50:17, output shaft first, input shaft second)\nrotation_distance: 22.522           # Pulley circumference mm\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"heating-related",children:"Heating Related"}),"\n",(0,s.jsx)(n.h3,{id:"pid",children:"PID"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"TARGET="})," in the command sets the temperature, please set it according to your usual printing temperature."]}),"\n",(0,s.jsx)(n.li,{children:"If you have multiple heating devices, you can use these commands for PID tuning."}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Extruder"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PID_CALIBRATE HEATER=extruder TARGET=245\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Bed"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PID_CALIBRATE HEATER=heater_bed TARGET=100\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"PTC"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PID_CALIBRATE HEATER=PTC TARGET=70\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"temperature-error-related",children:"Temperature Error Related"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If heating takes too long, refer to this method ",(0,s.jsx)(c.A,{variant:"contained",disableElevation:!0,href:"/docs/DebugDoc/ref-config/m109",children:"Click to Jump"})]}),"\n",(0,s.jsxs)(n.li,{children:["Please note that if the temperature is unstable, use this method to resolve errors caused by unstable temperatures ",(0,s.jsx)(c.A,{variant:"contained",disableElevation:!0,href:"/docs/DebugDoc/ref-config/verify_heater",children:"Click to Jump"})]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"limit-switch-related",children:"Limit Switch Related"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Currently being updated."}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"normal-limit-switch",children:"Normal Limit Switch"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Limit switch check command."}),"\n",(0,s.jsx)(n.li,{children:"Ensure the limit switch is a two-wire type. If it is a three-wire type, verify that the wiring sequence is correct; otherwise, it could damage the motherboard!!!"}),"\n",(0,s.jsx)(n.li,{children:"Ensure the limit switch is normally open and not triggered by any object."}),"\n",(0,s.jsxs)(n.li,{children:["Enter the following command in the console. If it works correctly, it will return the following information:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"QUERY_ENDSTOPS\n"})}),"\n",(0,s.jsx)(l.A,{image:i(22881).A,size:"80%",align:"center"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Ensure the limit switch is in the open state, then manually press the limit switch and enter ",(0,s.jsx)(n.code,{children:"QUERY_ENDSTOPS"}),".","\n",(0,s.jsx)(l.A,{image:i(26956).A,size:"80%",align:"center"}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"A change in the limit switch status indicates correct wiring."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"no-limit-switch",children:"No Limit Switch"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Note that the no-limit switch state should always be open; otherwise, there might be an issue with the configuration or wiring."}),"\n",(0,s.jsxs)(n.li,{children:["Enter the following command in the console. If it works correctly, it will return the following information:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"QUERY_ENDSTOPS\n"})}),"\n",(0,s.jsx)(l.A,{image:i(22881).A,size:"80%",align:"center"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"probe-related",children:"Probe Related"}),"\n",(0,s.jsx)(n.h3,{id:"bl-touch",children:"BL-TOUCH"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"pin_down: Probe extends."}),"\n",(0,s.jsx)(n.li,{children:"pin_up: Probe retracts."}),"\n",(0,s.jsx)(n.li,{children:"touch_mode: Verify sensor."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"BLTOUCH_DEBUG COMMAND=pin_down\nBLTOUCH_DEBUG COMMAND=pin_up\nBLTOUCH_DEBUG COMMAND=touch_mode\ntouch_mode\n"})}),"\n",(0,s.jsx)(n.h3,{id:"probe--tap",children:"Probe & TAP"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Normally untriggered."}),"\n",(0,s.jsxs)(n.li,{children:["It is recommended to add ",(0,s.jsx)(n.code,{children:"^"})," when configuring the pin."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"QUERY_PROBE\n"})}),"\n",(0,s.jsx)(l.A,{image:i(2695).A,size:"80%",align:"center"}),"\n",(0,s.jsx)(n.h3,{id:"repeatability-accuracy",children:"Repeatability Accuracy"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Ten times.","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"probe_accuracy\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["One hundred times.","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"probe_accuracy samples=100\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"special-types",children:"Special Types"}),"\n",(0,s.jsx)(n.h3,{id:"servo",children:"Servo"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Servos are available in 180\xb0 and 360\xb0 versions. Please distinguish between them."}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Reference configuration."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cfg",children:"[servo my_servo]\npin:PE6\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Reference command."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"SET_SERVO SERVO=my_servo ANGLE=360\nSET_SERVO SERVO=my_servo ANGLE=180\nSET_SERVO SERVO=my_servo ANGLE=0\n"})}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},37736:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/force-3248807facab6a40706e131c232c2c3c.png"},2695:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/probe-2eed74e7695dfe56ee81d5232af42952.png"},22881:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/query-6c8dc55c36a20f255bc5cdd0eabf9807.png"},26956:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/query1-80105c530a9a0da0e8ad39d00e402c90.png"}}]);
"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["84489"],{56615:function(e,t,n){n.r(t),n.d(t,{metadata:()=>i,contentTitle:()=>o,default:()=>u,assets:()=>d,toc:()=>c,frontMatter:()=>r});var i=JSON.parse('{"id":"ProductDoc/ExtensionBoard/fly-kppm/index","title":"Product Introduction","description":"The FLY-KPPM installation shutdown module is a security module specially designed for development boards such as Raspberry Pi, aimed at preventing data loss caused by power outages. Utilizing advanced technology, it can automatically switch to capacitor power when a power outage occurs, ensuring the development board can still operate stably for 15 seconds under power failure conditions, guaranteeing effective data saving. It is compact, convenient, and easy to install.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/ExtensionBoard/fly-kppm/index.mdx","sourceDirName":"ProductDoc/ExtensionBoard/fly-kppm","slug":"/ProductDoc/ExtensionBoard/fly-kppm/","permalink":"/fly-docs-next/en/docs/ProductDoc/ExtensionBoard/fly-kppm/","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/ExtensionBoard/fly-kppm/index.mdx","tags":[],"version":"current","lastUpdatedBy":"Xiaok","lastUpdatedAt":1741075603000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"FLY-KPPM-\u5B89\u5168\u5173\u673A\u6A21\u5757","permalink":"/fly-docs-next/en/docs/category/fly-kppm-\u5B89\u5168\u5173\u673A\u6A21\u5757"},"next":{"title":"Klipper Power Resume","permalink":"/fly-docs-next/en/docs/ProductDoc/ExtensionBoard/fly-kppm/power_resume"}}'),s=n("52676"),l=n("79938");let r={sidebar_position:1},o="Product Introduction",d={},c=[{value:"Product Precautions",id:"product-precautions",level:2},{value:"Product Screen Display Content Description",id:"product-screen-display-content-description",level:2},{value:"Fixed Shell Model Download",id:"fixed-shell-model-download",level:2},{value:"Pin Description",id:"pin-description",level:2},{value:"FLY Host Computer Usage Tutorial",id:"fly-host-computer-usage-tutorial",level:2},{value:"FLY Host Computer Wiring Tutorial",id:"fly-host-computer-wiring-tutorial",level:3},{value:"Raspberry Pi Host Computer Usage Tutorial",id:"raspberry-pi-host-computer-usage-tutorial",level:2}];function a(e){let t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components},{ImageView:i,TabItem:r,Tabs:o}=t;return!i&&h("ImageView",!0),!r&&h("TabItem",!0),!o&&h("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"product-introduction",children:"Product Introduction"})}),"\n",(0,s.jsx)(t.p,{children:"The FLY-KPPM installation shutdown module is a security module specially designed for development boards such as Raspberry Pi, aimed at preventing data loss caused by power outages. Utilizing advanced technology, it can automatically switch to capacitor power when a power outage occurs, ensuring the development board can still operate stably for 15 seconds under power failure conditions, guaranteeing effective data saving. It is compact, convenient, and easy to install."}),"\n",(0,s.jsx)(i,{image:n(47905).Z,size:"100%",align:"left"}),"\n",(0,s.jsx)(t.h2,{id:"product-precautions",children:"Product Precautions"}),"\n",(0,s.jsx)(t.admonition,{title:"Notice",type:"danger",children:(0,s.jsx)(t.p,{children:"The input power only supports DC12-24V. Pay attention to distinguish the positive and negative poles when wiring. The wiring process must be carried out under power-off condition. Confirm that the wiring is correct before powering on; the company will not be responsible for any losses caused by incorrect wiring."})}),"\n",(0,s.jsx)(t.admonition,{title:"Notice",type:"danger",children:(0,s.jsx)(t.p,{children:"The +5V at the 5V OUT socket is an emergency power output and is not for regular power supply. Please use USB-OUT or SIG/IO to power the host computer."})}),"\n",(0,s.jsx)(t.admonition,{title:"Notice",type:"danger",children:(0,s.jsx)(t.p,{children:"When used with the safety shutdown module, a 12V-24V power supply is required. To ensure the module works normally, the 5V output voltage on the safety shutdown module board cannot be lower than 4.9V. Otherwise, the safety shutdown module will boost the voltage internally to draw power, and the capacitor will always be in a charging state, causing the module to heat up continuously."})}),"\n",(0,s.jsx)(t.h2,{id:"product-screen-display-content-description",children:"Product Screen Display Content Description"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Screen Content Description"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Left Description"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Right Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Right Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"IN:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Input voltage"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.code,{children:"OUT:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Output voltage"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"CA:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Total capacitor voltage"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.code,{children:"OI:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Output load current"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"C1:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"C1 capacitor voltage"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.code,{children:"C2:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"C2 capacitor voltage"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"Temp:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Safety shutdown module temperature"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.code,{children:"E:"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Status prompt, see below"})]})]})]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Display Content"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Status Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"Ready!"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Normal startup"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"IN LOW!"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Input voltage low"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"IN OVR!"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Input current too high"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"OV LOE!"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Output voltage too low"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"OV OVR"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Output current too high"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"TP OVR!"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Temperature too high"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"NONE"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Unknown error"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"R: XX Sec"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"If power is cut off and then restored within 10 seconds, this prompt will appear. After the countdown ends, the host computer will restart"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"fixed-shell-model-download",children:"Fixed Shell Model Download"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"https://cdn.mellow.klipper.cn/STEP/KPPM.zip\n"})}),"\n",(0,s.jsx)(t.h2,{id:"pin-description",children:"Pin Description"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"OUT-RST Reset"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"OUT-PDN Shutdown"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"IN-PIN"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Default pulled high, the module will automatically detect the last power-off time when powered on.\nIf the power-off time is less than 10 seconds, it will wait until 10 seconds later to automatically switch the 5V output once (ensuring the host computer completes shutdown and can restart)\nIf connected to GND, the automatic detection of power-off time function will be disabled"}),"\n",(0,s.jsx)(i,{image:n(49562).Z,size:"100%",align:"left"}),"\n",(0,s.jsx)(t.h2,{id:"fly-host-computer-usage-tutorial",children:"FLY Host Computer Usage Tutorial"}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsx)(t.p,{children:"Only applicable to FLY-Pi, FLY-Pi-V2, FLY-C8"})}),"\n",(0,s.jsx)(t.p,{children:"The FLY host computer needs to use SSH to execute the following commands"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"sudo curl -kfSL --progress-bar https://cdn.mellow.klipper.cn/firmware/sun50i-h5-power-key.dtbo -o /boot/dtb/allwinner/overlay/sun50i-h5-power-key.dtbo\nsudo grep -q \"^overlays=.*power-key\" /boot/FlyOS-Env.txt || sudo sed -i '/^overlays=/ s/$/ power-key/' /boot/FlyOS-Env.txt\n"})}),"\n",(0,s.jsx)(t.p,{children:"Restart the system"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"sudo reboot\n"})}),"\n",(0,s.jsx)(t.h3,{id:"fly-host-computer-wiring-tutorial",children:"FLY Host Computer Wiring Tutorial"}),"\n",(0,s.jsx)(o,{children:(0,s.jsx)(r,{value:"serial",label:"FLY Host Computer Wiring Tutorial",default:!0,children:(0,s.jsxs)(o,{children:[(0,s.jsxs)(r,{value:"1",label:"FLY-C8 Using 5V Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-C8 using 5V wiring, check the diagram for correct wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(88223).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"2",label:"FLY-C8 Using USB Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-C8 using USB wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(94839).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"3",label:"FLY-Pi(\u03C0) Using 5V Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-Pi using 5V wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(53913).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"4",label:"FLY-Pi(\u03C0) Using USB Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-Pi using USB wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(76005).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"5",label:"FLY-Pi-V2 Using 5V Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-Pi-V2 using 5V wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(90557).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"6",label:"FLY-Pi-V2 Using USB Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"FLY-Pi-V2 using USB wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(10245).Z,size:"80%",align:"center"})]})]})})}),"\n",(0,s.jsx)(t.h2,{id:"raspberry-pi-host-computer-usage-tutorial",children:"Raspberry Pi Host Computer Usage Tutorial"}),"\n",(0,s.jsxs)(t.p,{children:["The operation of Raspberry Pi is similar to the above. Raspberry Pi needs to insert the SD card with the system image into the computer, add the line ",(0,s.jsx)(t.code,{children:"dtoverlay=gpio-shutdown,gpio_pin=21"})," in the config.txt file, and then save and exit."]}),"\n",(0,s.jsx)(i,{image:n(58629).Z,size:"80%",align:"left"}),"\n",(0,s.jsx)(o,{children:(0,s.jsx)(r,{value:"serial",label:"Raspberry Pi Host Computer Wiring Tutorial",default:!0,children:(0,s.jsxs)(o,{children:[(0,s.jsxs)(r,{value:"1",label:"Raspberry Pi Using 5V Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Raspberry Pi using 5V wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(28038).Z,size:"80%",align:"center"})]}),(0,s.jsxs)(r,{value:"2",label:"Raspberry Pi Using USB Wiring",default:!0,children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Raspberry Pi using USB wiring"}),"\n"]}),(0,s.jsx)(i,{image:n(99427).Z,size:"80%",align:"center"})]})]})})})]})}function u(e={}){let{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}function h(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},88223:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/c81-2f140bd9194abfa45a52ac82bc2a9a32.webp"},94839:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fly_c8_usb-daa17248ebe6c2cb5b054762f6686791.webp"},53913:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fly_pi_5v-c376c7bec07c4c3329942a219c13a386.webp"},76005:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fly_pi_usb-1528af6d74d6604fc81a84033f58a120.webp"},90557:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fly_pi_v2_5v-d1a743a4ed7d06b892dfdeea09a332db.webp"},10245:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fly_pi_v2_usb-492cd25a7aa4fb2b537bab025b298b13.webp"},47905:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/kppm-4188d010226e4d9e4b9b6c79a6f234ee.webp"},28038:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/pi_5v-65806d956b4b0c4998d6138893a7e0f3.webp"},99427:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/pi_usb-c388d47ae393a5b7d9fc3d9161744c18.webp"},49562:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/pins-50c25a6ff1457a8d1acea339c1b159e5.webp"},58629:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/rpi-config-0d33a20e85aaf435c6d5f0e211c44ea0.webp"},79938:function(e,t,n){n.d(t,{Z:function(){return o},a:function(){return r}});var i=n(75271);let s={},l=i.createContext(s);function r(e){let t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);
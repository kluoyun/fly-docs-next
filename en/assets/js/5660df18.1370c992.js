"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["6815"],{50065:function(e,t,n){n.d(t,{Z:()=>s,a:()=>o});var i=n(67294);let r={},a=i.createContext(r);function o(e){let t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:t},e.children)}},96792:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>o,default:()=>h,contentTitle:()=>s,assets:()=>l,toc:()=>d,metadata:()=>i});var i=JSON.parse('{"id":"ProductDoc/MainBoard/fly-pro/fly-pro-x10/LED_Effect","title":"LED_Effect","description":"* Please open the web page for automatic translation","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-pro/fly-pro-x10/LED_Effect.mdx","sourceDirName":"ProductDoc/MainBoard/fly-pro/fly-pro-x10","slug":"/ProductDoc/MainBoard/fly-pro/fly-pro-x10/LED_Effect","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/LED_Effect","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/LED_Effect.mdx","tags":[],"version":"current","lastUpdatedBy":"Xiaok","lastUpdatedAt":1745907428000,"sidebarPosition":13,"frontMatter":{"sidebar_position":13,"sidebar_label":"Plugin Control LED"},"sidebar":"tutorialSidebar","previous":{"title":"Configure LED","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/led"},"next":{"title":"FLY-Super \u7CFB\u5217\u4E3B\u677F","permalink":"/fly-docs-next/en/docs/category/fly-super-\u7CFB\u5217\u4E3B\u677F"}}'),r=n(85893),a=n(50065);let o={sidebar_position:13,sidebar_label:"Plugin Control LED"},s="LED Effects",l={},d=[{value:"Basic layer definition",id:"basic-layer-definition",level:2},{value:"Controlling the effects",id:"controlling-the-effects",level:3},{value:"Activating and deactivating effects",id:"activating-and-deactivating-effects",level:4},{value:"Fading in and out",id:"fading-in-and-out",level:4},{value:"Additional effect level parameters",id:"additional-effect-level-parameters",level:3},{value:"Defining LEDs",id:"defining-leds",level:2},{value:"Defining Effect Layers",id:"defining-effect-layers",level:2},{value:"Static",id:"static",level:4},{value:"LinearFade",id:"linearfade",level:4},{value:"Breathing",id:"breathing",level:4},{value:"Blink",id:"blink",level:4},{value:"Strobe",id:"strobe",level:4},{value:"Twinkle",id:"twinkle",level:4},{value:"Gradient",id:"gradient",level:4},{value:"Pattern",id:"pattern",level:4},{value:"Comet",id:"comet",level:4},{value:"Chase",id:"chase",level:4},{value:"Heater",id:"heater",level:4},{value:"Temperature",id:"temperature",level:4},{value:"Fire",id:"fire",level:4},{value:"HeaterFire",id:"heaterfire",level:4},{value:"AnalogPin",id:"analogpin",level:4},{value:"Stepper",id:"stepper",level:4},{value:"StepperColor",id:"steppercolor",level:4},{value:"Progress",id:"progress",level:4},{value:"Homing",id:"homing",level:4},{value:"Effect Layer Blending",id:"effect-layer-blending",level:2},{value:"bottom",id:"bottom",level:4},{value:"top",id:"top",level:4},{value:"add",id:"add",level:4},{value:"subtract",id:"subtract",level:4},{value:"subtract_b",id:"subtract_b",level:4},{value:"difference",id:"difference",level:4},{value:"average",id:"average",level:4},{value:"multiply",id:"multiply",level:4},{value:"divide",id:"divide",level:4},{value:"divide_inv",id:"divide_inv",level:4},{value:"screen",id:"screen",level:4},{value:"lighten",id:"lighten",level:4},{value:"darken",id:"darken",level:4},{value:"overlay",id:"overlay",level:4},{value:"das Blinkenlights",id:"das-blinkenlights",level:2},{value:"Bed Idle with Temperature",id:"bed-idle-with-temperature",level:2},{value:"Brightness Controlled By Potentiometer",id:"brightness-controlled-by-potentiometer",level:2},{value:"Progress Bar",id:"progress-bar",level:2},{value:"My LEDs are flickering randomly",id:"my-leds-are-flickering-randomly",level:2},{value:"My LEDs at the ends of the strips are not as bright as the rest",id:"my-leds-at-the-ends-of-the-strips-are-not-as-bright-as-the-rest",level:2},{value:"My colors aren&#39;t correct",id:"my-colors-arent-correct",level:2}];function c(e){let t={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Please open the web page for automatic translation"}),"\n"]}),"\n",(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"led-effects",children:"LED Effects"})}),"\n",(0,r.jsx)(t.p,{children:"Addressable LEDs are beginning to supersede RGB LEDs for their\nflexibility and relative ease of use. With each individual element\ncapable of displaying an entire spectrum of colors at very high speed,\nthey can be used to create a variety of lighting effects."}),"\n",(0,r.jsx)(t.h1,{id:"configuring-the-strips",children:"Configuring the strips"}),"\n",(0,r.jsx)(t.p,{children:"In your config file, each strip or chain connected to an IO pin must\nhave a definition. Each strips data pin (and clock pin if applicable)\nis defined along with the number of LEDs in the chain. The LED Effect\ninstances are capable of using multiple strips of different types and\ncolor orders concurrently, but each strip must first be defined by its\ntype."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[neopixel panel_ring]\npin:                     ar6\nchain_count:             16\n"})}),"\n",(0,r.jsx)(t.h1,{id:"configuring-the-effects",children:"Configuring the effects"}),"\n",(0,r.jsxs)(t.p,{children:["Effects are, in a more abstract sense, a ",(0,r.jsx)(t.em,{children:"state"})," that the strips\nexist in. Effects can be comprised of 1 led or 100. There can be\none effect layer or 10. It is all arbitrary and extensible. This\nmeans the only limit to how many layers and LEDs can be run\nconcurrently is how much processing power the host OS is capable\nof handling. During initial testing, upwards of 100 LEDs and 12\neffect layers were run concurrently on a Raspberry Pi 4 at 24 FPS."]}),"\n",(0,r.jsx)(t.h2,{id:"basic-layer-definition",children:"Basic layer definition"}),"\n",(0,r.jsx)(t.p,{children:"For our example printer, there is one Neopixel ring with 16 LEDs\nthat is situated on the front panel, and a short segment of\nNeopixel LEDs next to the hot end for illuminating the print."}),"\n",(0,r.jsx)(t.p,{children:"There are also 5 Dotstar LEDs located underneath the bed.\nPin numbers listed here are completely made-up."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[neopixel panel_ring]\npin:                     ar6\nchain_count:             16\n\n[neopixel tool_lights]\npin:                     ar15\nchain_count:             6\n\n[dotstar bed_lights]\ndata_pin:                ar21\nclock_pin                ar22\nchain_count:             5\n"})}),"\n",(0,r.jsxs)(t.p,{children:["We would like the ring to turn on a light shade of blue when the\nprinter comes online, and we want the brightness to ",(0,r.jsx)(t.em,{children:"breathe"})," in and out."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[led_effect panel_idle]\nautostart:              true\nframe_rate:             24\nleds:\n    neopixel:panel_ring\nlayers:\n    breathing  10 1 top (.5,.5,1)\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This has defined an effect called ",(0,r.jsx)(t.code,{children:"panel_idle"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"controlling-the-effects",children:"Controlling the effects"}),"\n",(0,r.jsx)(t.p,{children:"Effects can be active or inactive. Inactive effects don't output any color\ndata, while active effects return color data, that is summed up for each LED\nthey run on."}),"\n",(0,r.jsx)(t.h4,{id:"activating-and-deactivating-effects",children:"Activating and deactivating effects"}),"\n",(0,r.jsxs)(t.p,{children:["Our example effect can be activated by running the GCode command\n",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle"}),". To stop all effects which are currently\nrunning on the LEDs the new effect is using, set the ",(0,r.jsx)(t.code,{children:"REPLACE"})," parameter to 1:\n",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle REPLACE=1"}),"\nRunning the command ",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle STOP=1"})," deactivates this\nparticular effect again.\nTo deactivate all effects we can use the GCode command ",(0,r.jsx)(t.code,{children:"STOP_LED_EFFECTS"}),".\nTo only deactivate effects for certain LEDs we can specify the LEDS parameter:\n",(0,r.jsx)(t.code,{children:'STOP_LED_EFFECTS LEDS="neopixel:panel_ring"'})," You can also specify indeces (see\nbelow): ",(0,r.jsx)(t.code,{children:'STOP_LED_EFFECTS LEDS="neopixel:panel_ring (1-7)"'}),". Only one\nLED parameter can be specified at a time. To stop the effects for multiple LEDs\nwe have to run the command multiple times."]}),"\n",(0,r.jsx)(t.h4,{id:"fading-in-and-out",children:"Fading in and out"}),"\n",(0,r.jsxs)(t.p,{children:["Effects can be faded in and out by specifying the ",(0,r.jsx)(t.code,{children:"FADETIME"})," parameter:\n",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle FADETIME=1.0"})," fades the effect in during one\nsecond. Running ",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle STOP=1 FADETIME=1.0"})," fades it\nout in one second. We can also fade out all effects by running\n",(0,r.jsx)(t.code,{children:"STOP_LED_EFFECTS FADETIME=1.0"}),". It is also possible to crossfade effects by\nusing the ",(0,r.jsx)(t.code,{children:"REPLACE"})," parameter with ",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT"})," (see above):\n",(0,r.jsx)(t.code,{children:"SET_LED_EFFECT EFFECT=panel_idle REPLACE=1 FADETIME=1.0"})]}),"\n",(0,r.jsx)(t.h3,{id:"additional-effect-level-parameters",children:"Additional effect level parameters"}),"\n",(0,r.jsx)(t.p,{children:"autostart: true\nStarts the effect on startup"}),"\n",(0,r.jsx)(t.p,{children:"frame_rate:\nSets the frame rate in frames per second for the effect"}),"\n",(0,r.jsx)(t.p,{children:"run_on_error:\n(Needs patched MCU firmware. Currently not supported.)"}),"\n",(0,r.jsxs)(t.p,{children:["heater:\nSpecifies the heater to use for a heater effect. Use ",(0,r.jsx)(t.code,{children:"extruder"})," for the\nextruder and ",(0,r.jsx)(t.code,{children:"heater_bed"})," for the bed. For temperature fans or  sensors add the\ntype and use quotes.\nExample: ",(0,r.jsx)(t.code,{children:'heater: "temperature_fan myfan"'})]}),"\n",(0,r.jsx)(t.p,{children:"analog_pin:\nSpecifies the pin to use for effects using an analog signal."}),"\n",(0,r.jsxs)(t.p,{children:["stepper:\nSpecifies the axis to use for the stepper effect. Possible values are:\n",(0,r.jsx)(t.code,{children:"x"}),", ",(0,r.jsx)(t.code,{children:"y"})," and ",(0,r.jsx)(t.code,{children:"z"}),". Example: ",(0,r.jsx)(t.code,{children:"stepper: x"})]}),"\n",(0,r.jsxs)(t.p,{children:["endstops:\nSpecifies the endstops the homing effect triggers on. Multiple endstops can be\nspecified as a comma seprated list. Possible values are: ",(0,r.jsx)(t.code,{children:"x"}),", ",(0,r.jsx)(t.code,{children:"y"}),", ",(0,r.jsx)(t.code,{children:"z"})," and ",(0,r.jsx)(t.code,{children:"probe"}),".\nExample: ",(0,r.jsx)(t.code,{children:"endstops: x, y"})]}),"\n",(0,r.jsx)(t.h2,{id:"defining-leds",children:"Defining LEDs"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"leds:"})," section is a list of Neopixel or Dotstar strips that will\nmake up the effect. Both types can be used for the same effect. Each\nstrip is defined on a separate line and indented beneath the ",(0,r.jsx)(t.code,{children:"leds:"}),"\nsection."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"leds:\n    neopixel:panel_ring\n    neopixel:tool_lights\n    dotstar:bed_lights\n"})}),"\n",(0,r.jsx)(t.p,{children:"Additionally, one may decide to only have certain LEDs displaying the\neffect. This is accomplished by providing the index of the LEDs to be\nused after the strip name. The index can be a list or a range. The range can\nalso be inversed to invert the effect. If the indices are omitted, the entire\nstrip is used."}),"\n",(0,r.jsx)(t.p,{children:"As well, if for some reason you needed to, the same strip can be used\ntwice in an effect with different emitters being specified."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"leds:\n    neopixel:tool_lights\n    neopixel:panel_ring  (1-7)\n    neopixel:panel_ring  (16-9)\n    dotstar:bed_lights   (1,3,5)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"defining-effect-layers",children:"Defining Effect Layers"}),"\n",(0,r.jsx)(t.p,{children:"Effects are generated as frames. Each frame contains the number of pixels\nequal to the number of LEDs defined for the effect. So an effect with 22\nLEDs specified would have 22 pixels per frame."}),"\n",(0,r.jsx)(t.p,{children:"Each effect layer is generated as a frame. Each layer frame is blended with\nthe next to generate the effect. Blending is cumulative and how colors are\nblended is defined by the blending mode of the top layer.\nEach effect layer is listed on its own line and each has its own settings."}),"\n",(0,r.jsx)(t.p,{children:"Most effect layers such as breathing and gradient are pre-rendered when\nKlipper starts in order to save on computing them later. Others such as\nFire and Twinkle are rendered on demand."}),"\n",(0,r.jsx)(t.p,{children:"Each layer is defined with the following parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Layer name"}),"\n",(0,r.jsx)(t.li,{children:"Effect Rate"}),"\n",(0,r.jsx)(t.li,{children:"Cutoff"}),"\n",(0,r.jsx)(t.li,{children:"Blending mode"}),"\n",(0,r.jsx)(t.li,{children:"Color palette"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Each layer must be on a single line and each line must be indented.\nColor palettes can be of unlimited length but may be compressed depending\non the size of the frame or number of LEDs on a strip. Colors are defined\nas groups of Red, Green, Blue and (optional) White. The white channel only used\non RGBW LEDs and ignored on RGB LEDs. The range for each color is a decimal\nnumber from 0.0 to 1.0. So for yellow, you would use ( 1.0, 1.0, 0.0 ). For\nwhite you would use ( 1.0, 1.0, 1.0 ) on an RGB LED or ( 0.0, 0.0, 0.0, 1.0 )\non an RGBW LED."}),"\n",(0,r.jsx)(t.p,{children:"Individual colors must be wrapped in parentheses and separated by commas."}),"\n",(0,r.jsx)(t.p,{children:"Some Sample Palettes:"}),"\n",(0,r.jsx)(t.p,{children:"Rainbow    (1.0, 0.0, 0.0),(0.0, 1.0, 0.0),(0.0, 0.0, 1.0)\nFire       (0.0, 0.0, 0.0),(1.0, 0.0, 0.0),(1.0, 1.0, 0.0),(1.0, 1.0, 1.0)\nBlue Comet (0.8, 1.0, 1.0),(0.0, 0.8, 1.0),(0.0, 0.0, 1.0)"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"layers:\n   breathing  .5 0 screen (0,.1,1), (0,1,.5), (0, 1,1), (0,.1,.5)\n   static     1 0 bottom (1,.1,0), (1,.1,0), (1,.1,0), (1,1,0)\n"})}),"\n",(0,r.jsx)(t.p,{children:"There are several effects to choose from."}),"\n",(0,r.jsx)(t.h4,{id:"static",children:"Static"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  Not used but must be provided\nCutoff:       Not used but must be provided\nPalette:      Colors are blended evenly across the strip\nA single color is displayed and it does not change. If a palette of multiple\ncolors is provided, colors will be evenly blended along the LEDs based on\ndifference in hue."}),"\n",(0,r.jsx)(t.h4,{id:"linearfade",children:"LinearFade"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  3   Duration of a complete cycle\nCutoff:       0   Not used but must be provided\nPalette:          Colors are cycled in order"}),"\n",(0,r.jsx)(t.p,{children:"LEDs fade through the colors. If a palette of multiple colors is provided, it\nwill cycle through those colors in the order they are specified in the palette.\nThe effect rate parameter controls how long it takes to go through all colors."}),"\n",(0,r.jsx)(t.h4,{id:"breathing",children:"Breathing"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  3   Duration of a complete cycle\nCutoff:       0   Not used but must be provided\nPalette:          Colors are cycled in order"}),"\n",(0,r.jsx)(t.p,{children:'Colors fade in and out. If a palette of multiple colors is provided, it will\ncycle through those colors in the order they are specified in the palette.\nThe effect rate parameter controls how long it takes to "breathe" one time.'}),"\n",(0,r.jsx)(t.h4,{id:"blink",children:"Blink"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Duration of a complete cycle\nCutoff:       0.5 Ratio of the time the LEDs are on (between 0 and 1)\nPalette:          Colors are cycled in order"}),"\n",(0,r.jsx)(t.p,{children:"LEDs are turned fully on and fully off based on the effect speed. If a palette\nof multiple colors is provided, it will cycle through those colors in order."}),"\n",(0,r.jsx)(t.h4,{id:"strobe",children:"Strobe"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Number of times per second to strobe\nCutoff:       1.5 Determines decay rate. A higher number yields quicker decay\nPalette:          Colors are cycled in order"}),"\n",(0,r.jsx)(t.p,{children:"LEDs are turned fully on and then faded out over time with a decay. If a palette\nof multiple colors is provided, it will cycle through those colors in order. The\neffect rate controls how many times per second the lights will strobe. The cutoff\nparameter controls the decay rate. A good decay rate is 1.5."}),"\n",(0,r.jsx)(t.h4,{id:"twinkle",children:"Twinkle"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Increases the probability that an LED will illuminate.\nCutoff:       .25 Determines decay rate. A higher number yields quicker decay\nPalette:          Random color chosen\nRandom flashes of light with decay along a strip. If a palette is specified,\na random color is chosen from the palette."}),"\n",(0,r.jsx)(t.h4,{id:"gradient",children:"Gradient"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   How fast to cycle through the gradient, negative values change direction.\nCutoff:       1   Number of gradients on chain\nPalette:          Linear gradient with even spacing.\nColors from the palette are blended into a linear gradient across the length\nof the strip. The effect rate parameter controls the speed at which the colors\nare cycled through. A negative value for the effect rate changes the direction\nthe gradient cycles (right to left vs left to right). The Cutoff determines the\nlength of the gradient in relation to the chain length. The bigger the value,\nthe shorter the gradient (e.g. the value 2 means 2 gradients on the length of\nthe chain)"}),"\n",(0,r.jsx)(t.h4,{id:"pattern",children:"Pattern"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Time between pattern shifts\nCutoff:       1   How far the pattern gets shifted\nPalette:          The pattern to be shifted\nThe palette is applied as a recurring pattern on the chain and shifted along the\nchain. The effect rate determines the time between the shifts in seconds, the\ncutoff determines the amount of LED positions the pattern gets shifted."}),"\n",(0,r.jsx)(t.h4,{id:"comet",children:"Comet"}),"\n",(0,r.jsx)(t.p,{children:'Effect Rate:  1   How fast the comet moves, negative values change direction\nCutoff:       1   Length of tail (somewhat arbitrary)\nPalette:          Color of "head" and gradient of "tail"\nA light moves through the LEDs with a decay trail. Direction can be controlled\nby using a negative effect rate value. The palette colors determine the color\nof the comet and the tail. The first color of the palette defines the color\nof the "head" of the comet and the remaining colors are blended into the "tail"'}),"\n",(0,r.jsx)(t.h4,{id:"chase",children:"Chase"}),"\n",(0,r.jsx)(t.p,{children:'Effect Rate:  1   How fast the comet moves, negative values change direction\nCutoff:       1   Length of tail (somewhat arbitrary)\nPalette:          Color of "head" and gradient of "tail"\nIdentical settings as Comet, but with multiple lights chasing each other.'}),"\n",(0,r.jsx)(t.h4,{id:"heater",children:"Heater"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Minimum temperature to activate effect\nCutoff:       0   Disable effect once temp is reached\nPalette:          Color values to blend from Cold to Hot\nThis effect becomes active when the specified heater is active or the temperature\nis greater than the minimum specified temperature. For instance, if a heater is\nturned on and set to a target temperature, the LEDs will cycle through the gradient\ncolors until the target temperature is met. Once it has been met, the last color\nof the gradient is used and the effect is essentially a static color until the\nHeater state changes. If the cutoff parameter is supplied, the effect will be\ndisabled once the target temperature is met. If the heater is turned off,\nthe colors will follow this pattern in reverse until the temperature falls\nbelow the minimum temperature specified in the config. This can be used to\nindicate the hotend or bed is in a safe state to touch."}),"\n",(0,r.jsx)(t.h4,{id:"temperature",children:"Temperature"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  20  Cold Temperature\nCutoff:       80  Hot Temperature\nPalette:          Color values to blend from Cold to Hot\nThe temperature of the configured heater determines the color in a gradient over\nthe palette. When only one color is defined in the palette, the brightness of\nthat color is defined by the temperature."}),"\n",(0,r.jsx)(t.h4,{id:"fire",children:"Fire"}),"\n",(0,r.jsx)(t.p,{children:'Effect Rate:  45  Probability of "sparking"\nCutoff:       40  Rate of "cooling"\nPalette:          Color values to blend from "Cold" to "Hot"\nThe FastLED library for Arduino has a sample sketch called Fire2012WithPalette\nincluded with it. This effect is a port of that sketch. It simulates a flame by\n"sparking" an LED. The "heat" from that LED travels down the length of the LEDs\nwhere it gradually cools. A higher rate of sparking causes a greater amount\nof heat to accumulate at the base of the strip resulting a more intense flame.\nChanging the rate of cooling results in longer or shorter overall flames.'}),"\n",(0,r.jsx)(t.h4,{id:"heaterfire",children:"HeaterFire"}),"\n",(0,r.jsx)(t.p,{children:'Effect Rate:  1   Minimum temperature to activate effect\nCutoff:       0   Disable effect once temp is reached\nPalette:          Color values to blend from "Cold" to "Hot"\nThe fire effect but responsive to the temperature of the specified heater.\nThe flame starts as a small ember and increases in intensity as the heater\'s\ntarget temperature is reached. If the cutoff parameter is set to 1, the effect\nwill be disabled once the target temperature is reached, otherwise it will\nstay active until the heater is disabled.'}),"\n",(0,r.jsx)(t.h4,{id:"analogpin",children:"AnalogPin"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  10  Multiplier for input signal\nCutoff:       40  Minimum threshold to trigger effect\nPalette:          Color values to blend\nThis effect uses the value read from an analog pin to determine the color.\nIf multiple colors are specified in the palette, it chooses one based on the\nvalue of the pin. If only one color is specified, the brightness is proportional\nto the pin value. An example usage would be attaching an analog potentiometer\nthat controls the brightness of an LED strip. Internally, input voltage is measured\nas a percentage of voltage vs aref. Another use could be to attach the RPM wire\nfrom a fan if the fan has a tachometer. It must be used with care as too much\ncurrent or too high a voltage can damage a pin or destroy a controller board."}),"\n",(0,r.jsx)(t.h4,{id:"stepper",children:"Stepper"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  4   Number of trailing LEDs\nCutoff:       4   Number of leading LEDs\nPalette:          Color values to blend\nThe position of the specified stepper motor is represented by the first color\nin the palette. The remaining colors in the gradient are blended and mirrored\non either side. As the stepper position changes relative to the axis length,\nthe lights move up and down the strip. It should be noted that the effect\nitself updates stepper position every half second based on the reported position\nof the stepper similar to the GET_POSITION gcode command. It will not be realtime.\nA negative value in effect rate will fill the entire strip leading up to the stepper\nposition, a negative value in cutoff will fill the entire strip after the stepper position."}),"\n",(0,r.jsx)(t.h4,{id:"steppercolor",children:"StepperColor"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Scaling of position\nCutoff:       0   Offset of position\nPalette:          Color values to blend\nThe color of the LEDs are determined by the position of the stepper motor. The\nposition is determined between 0 and 100 and is multiplied with the effect rate\nand the cutoff is added as offset. This then determines the value in the\npalette, that is calculated as a gradient over the specified color values."}),"\n",(0,r.jsx)(t.h4,{id:"progress",children:"Progress"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  4   Number of trailing LEDs\nCutoff:       4   Number of leading LEDs\nPalette:          Color values to blend\nExact same configuration as Stepper but instead of reporting stepper position, this\nlayer reports print progress."}),"\n",(0,r.jsx)(t.h4,{id:"homing",children:"Homing"}),"\n",(0,r.jsx)(t.p,{children:"Effect Rate:  1   Determines decay rate. A higher number yields slower decay\nCutoff:       0   Not used, but must be provided\nPalette:          Colors are cycled in order"}),"\n",(0,r.jsx)(t.p,{children:"LEDs turn on during homing when the endstop is triggered and fade out again. The\neffect rate determines the time for the fade out. If a palette of multiple colors\nis provided, it will cycle through those colors in order."}),"\n",(0,r.jsx)(t.h2,{id:"effect-layer-blending",children:"Effect Layer Blending"}),"\n",(0,r.jsx)(t.p,{children:"If you have ever used image editing software you may be familiar with\ncolor blending between image layers. Several common color blending\ntechniques have been added to blend LED layers together. Layers defined\nin the configuration are ordered top to bottom."}),"\n",(0,r.jsx)(t.p,{children:"If there are 3 layers defined, the bottom layer is first blended with the\nmiddle layer. The resultant layer is then blended with the top. The bottom\nlayer will never be blended with anything even if a blending mode is specified."}),"\n",(0,r.jsx)(t.p,{children:"Layer blending is always evaluated from the bottom up."}),"\n",(0,r.jsx)(t.p,{children:"Since values cannot exceed 100% brightness and 0% darkness, they are clamped\nto this range as a floating-point number ( 0.0 - 1.0 )"}),"\n",(0,r.jsx)(t.h4,{id:"bottom",children:"bottom"}),"\n",(0,r.jsx)(t.p,{children:"No blending is done, the value from the color channel of the bottom layer is used."}),"\n",(0,r.jsx)(t.h4,{id:"top",children:"top"}),"\n",(0,r.jsx)(t.p,{children:"No blending is done, the value from the color channel of the top layer is used."}),"\n",(0,r.jsx)(t.h4,{id:"add",children:"add"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t + b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"Color channels (Red, Green, and Blue) are added to one another. This results\nin channels becoming brighter."}),"\n",(0,r.jsx)(t.h4,{id:"subtract",children:"subtract"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( b - t )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The the top layer is subtracted from the bottom layer. This results in darkening\nsimilar colors."}),"\n",(0,r.jsx)(t.h4,{id:"subtract_b",children:"subtract_b"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t - b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The the bottom layer is subtracted from the top layer. This results in darkening\nsimilar colors."}),"\n",(0,r.jsx)(t.h4,{id:"difference",children:"difference"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t - b ) or ( b - t )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The darker of the layers is subtracted from the brighter of the two"}),"\n",(0,r.jsx)(t.h4,{id:"average",children:"average"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t + b ) / 2\n"})}),"\n",(0,r.jsx)(t.p,{children:"The average of the channels is taken"}),"\n",(0,r.jsx)(t.h4,{id:"multiply",children:"multiply"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t * b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The channels are multiplied together, this is useful to darken colors"}),"\n",(0,r.jsx)(t.h4,{id:"divide",children:"divide"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t / b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The channels are divided, this results in brightening colors, often to white"}),"\n",(0,r.jsx)(t.h4,{id:"divide_inv",children:"divide_inv"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( b / t )\n"})}),"\n",(0,r.jsx)(t.p,{children:"Like divide, but bottom divided by top"}),"\n",(0,r.jsx)(t.h4,{id:"screen",children:"screen"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    1 - ( 1 - t ) * ( 1 - b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The values are inverted, multiplied, and then inverted again. Similar to\ndivide, it results in brighter colors"}),"\n",(0,r.jsx)(t.h4,{id:"lighten",children:"lighten"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t if t > b else b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The brighter of the color channels is used"}),"\n",(0,r.jsx)(t.h4,{id:"darken",children:"darken"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( t if t < b else b )\n"})}),"\n",(0,r.jsx)(t.p,{children:"The opposite of lighten, the darker of color channels is used"}),"\n",(0,r.jsx)(t.h4,{id:"overlay",children:"overlay"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"    ( 2ab if a > .5 else 1 - 2( 1 - a )( 1 - b ) )\n"})}),"\n",(0,r.jsx)(t.p,{children:"Overlay is a combination of multiply and screen. This has a similar effect\nof increasing contrast."}),"\n",(0,r.jsx)(t.h1,{id:"sample-configurations",children:"Sample Configurations"}),"\n",(0,r.jsx)(t.h2,{id:"das-blinkenlights",children:"das Blinkenlights"}),"\n",(0,r.jsx)(t.p,{children:"In the event of critical error, all LED strips breath red in unison to\nprovide a visible indicator of an error condition with the printer. This\neffect is disabled during normal operation and only starts when the MCU\nenters a shutdown state (currently not supported)."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[led_effect critical_error]\nleds:\n    neopixel:tool_lights\n    neopixel:bed_lights\nlayers:\n    strobe         1  1.5   add        (1.0,  1.0, 1.0)\n    breathing      2  0     difference (0.95, 0.0, 0.0)\n    static         1  0     top        (1.0,  0.0, 0.0)\nautostart:                             false\nframe_rate:                            24\nrun_on_error:                          true\n"})}),"\n",(0,r.jsx)(t.h2,{id:"bed-idle-with-temperature",children:"Bed Idle with Temperature"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[led_effect bed_effects]\nleds:\n    neopixel:bed_lights\nautostart:                          true\nframe_rate:                         24\nheater:                             heater_bed\nlayers:\n    heater  50 0 add    (1,1,0),(1,0,0)\n    static  0  0 top    (1,0,0)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"brightness-controlled-by-potentiometer",children:"Brightness Controlled By Potentiometer"}),"\n",(0,r.jsx)(t.p,{children:'This is an example of how to combine the Analog Pin effect with\nlayer blending so it controls the brightness of the lights. One\ncould connect a potentiometer to a thermistor port and use the\nvoltage reading from that pin to determine the amount of color\nto subtract from the base layers. The potentiometer would need\nto be wired so that when it is turned "down" the voltage on the\nanalog pin is on full output and when  it is turned up it is on\nminimum output. This way, when the potentiometer is "down", the\ncolor (1.0, 1.0, 1.0) (Full white) is being subtracted from the\ncolors of the layer, resulting in (0.0, 0.0, 0.0) (Full Black).\nThe effect rate and cutoff would need to be tuned to the specific\npotentiometer and board combination.'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[led_effect bed_effects]\nleds:\n    neopixel:bed_lights\nautostart:                          true\nframe_rate:                         24\nanalog_pin:                         ar52\nlayers:\n    analogpin 10 0 subtract    (1,1,1)\n    static    0  0 top         (1,1,1)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"progress-bar",children:"Progress Bar"}),"\n",(0,r.jsx)(t.p,{children:"Using a single strip of LEDs, print progress\nis displayed as a light blue line over\na dark blue background"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"[led_effect progress_bar]\nleds:\n    neopixel:progress_lights\nautostart:                          true\nframe_rate:                         24\nlayers:\n    progress  -1  0 add         ( 0, 0,   1),( 0, 0.1, 0.6)\n    static     0  0 top         ( 0, 0, 0.1)\n"})}),"\n",(0,r.jsx)(t.h1,{id:"frequently-asked-questions",children:"Frequently Asked Questions"}),"\n",(0,r.jsx)(t.h2,{id:"my-leds-are-flickering-randomly",children:"My LEDs are flickering randomly"}),"\n",(0,r.jsx)(t.p,{children:"This is usually due to some sort of signal issue. Most addressable\nLEDs have a specific protocol they use for communication. It typically\ninvolves sending bits of data at a specific interval followed by a\nreset latch to signal them to light up. They will stay the last color\nthey were set until told to do something different."}),"\n",(0,r.jsx)(t.p,{children:"With most implementations of addressable LEDs in printer firmware, the\ncolor data is sent once when the gcode command is executed and not sent\nagain. As long as that initial signal is read, they will stay that color."}),"\n",(0,r.jsx)(t.p,{children:"With this particular implementation, the color data is being updated at\nregular intervals determined by the effect frame rate. So 10 frames per\nsecond would result in 10 color updates to the LEDs per second."}),"\n",(0,r.jsx)(t.p,{children:"The data lines are susceptible to electromagnetic interference from other\nelectronics on the printer. When this interference is present, it can\nresult in malformed data going to the LEDs."}),"\n",(0,r.jsx)(t.p,{children:"To mitigate this, one can try insulating or isolating the data line from\nother wires. Try to keep the data lines as short as possible. This is\nespecially problematic for 32 bit boards which typically output the\ndata signal at 3.3V."}),"\n",(0,r.jsx)(t.p,{children:"Signal integrity can also be deteriorated by ringing and reflections on\nthe data line. Especially, when the cable to the first LED is rather long.\nThis can be reduced by adding a 700 Ohm resistor in line to the data line\ndirectly in front of the first LED."}),"\n",(0,r.jsx)(t.p,{children:"Another source of flickering is voltage drop. Addressable LEDs consume\nbetween 20 and 60mA of power each depending on how bright they are set.\nIf they are being run on a supply that cannot supply enough power, such\nas the internal voltage regulator of a printer board, it could manifest\nas flickering or overall dimness with the strips."}),"\n",(0,r.jsx)(t.h2,{id:"my-leds-at-the-ends-of-the-strips-are-not-as-bright-as-the-rest",children:"My LEDs at the ends of the strips are not as bright as the rest"}),"\n",(0,r.jsx)(t.p,{children:"This typically has to do with the LEDs at the ends of the strip not\ngetting enough power compared to the LEDs at the beginning of the strip.\nThe solution is to solder a VCC and GND wire to the end of the strip.\nThese additional power lines will allow the LEDs at the ends to draw\nthe power they need. This usually only occurs on very long strips or\nif the power supply is already at its limit. It is always recommended\nto power LEDs like this from a separate 5V source from the board."}),"\n",(0,r.jsx)(t.h2,{id:"my-colors-arent-correct",children:"My colors aren't correct"}),"\n",(0,r.jsx)(t.p,{children:"Different chip manufacturers and chip styles use slightly different\nprotocols for color data. Some specify the color order be Red, Green,\nthen Blue others specify Green, Red, Blue. The configuration for the\nLED strip has an optional parameter that can be set in the 'neopixel'\nsection to change the color order."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"color_order: GRB"})}),"\n",(0,r.jsx)(t.p,{children:"If you are unsure of the color order of your LEDs and want to test this,\nyou can comment out or disable all of the effects you have configured\nand use a gcode command to set the color of the led strips directly."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"SET_LED LED=<config_name> RED=1 GREEN=0 BLUE=0 TRANSMIT=1"})}),"\n",(0,r.jsx)(t.p,{children:"This command should turn the entire strip red. If the strip turns green,\nthen it uses a GRB color order."}),"\n",(0,r.jsx)(t.p,{children:"Some LEDs, like the SK6812, also have a white channel. For that the color order\ncan be set to:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"color_order: GRBW"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["FLY's TP driver needs to be configured as ",(0,r.jsx)(t.code,{children:"colorreorder: GRB"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["FLY's TP driver needs to be configured as ",(0,r.jsx)(t.code,{children:"colorreorder: GRB"})]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);
"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["42966"],{26062:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,default:()=>_,contentTitle:()=>a,assets:()=>p,toc:()=>d,metadata:()=>r});var r=JSON.parse('{"id":"ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/cfg","title":"Klipper Reference Configuration","description":"","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/cfg.mdx","sourceDirName":"ProductDoc/MainBoard/fly-gemini/fly-gemini-v3","slug":"/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/cfg","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/cfg","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/cfg.mdx","tags":[],"version":"current","lastUpdatedBy":"xishangyue","lastUpdatedAt":1746004502000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"sidebar_label":"Klipper Reference Configuration"},"sidebar":"tutorialSidebar","previous":{"title":"BL Firmware, Please Ignore","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/flash/bl"},"next":{"title":"Mainboard Wiring","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-gemini/fly-gemini-v3/wiring"}}'),o=t(85893),i=t(50065);let s={sidebar_position:6,sidebar_label:"Klipper Reference Configuration"},a="Klipper Reference Configuration",p={},d=[];function c(e){let n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"klipper-reference-configuration",children:"Klipper Reference Configuration"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-cfg",children:"####################################################################################\n#                         3D MELLOW / FLY_GEMINI                                   #\n####################################################################################\n## FLY_GEMINI Documentation: http://mellow.klipper.cn/#/board/fly_gemini_v3/README\n## FLY_GEMINI Schematic: https://github.com/Mellow-3D/Fly-Gemini-V3\n## FLY Official Taobao Store: https://shop126791347.taobao.com/shop/view_shop.htm?spm=a230r.1.14.4.1a4840a8hyvpPJ&user_number_id=2464680006\n## For after-sales service, please contact Taobao customer service\n## FLY After-sales Technical Support Group: 621032883\n## FLY-RRF Firmware Group: 786561979\n\n#####################################################################\n#                               Notes                               #\n#####################################################################\n##***Items to change/check:***\n## MCU Path                                [mcu] \n## Printer movement range                   xyz position   \n## Thermistor type                          [extruder] and [heater_bed]\n## Z endstop stop position                  [safe_z_home] \n## Z endstop offset position                [stepper_z] \n## PID tuning                               [extruder] and [heater_bed] \n## Fine-tune extruder motor steps           [extruder] \n\n#####################################################################\n#                               File Includes                       #\n#####################################################################\n#[include fluidd.cfg]          # For FLUIDD.\n#[include mainsail.cfg]        # For MAINSAIL.\n#Choose the appropriate file to use\n\n#####################################################################\n#                               Mainboard Config                    #\n#####################################################################\n[mcu]\nserial: /dev/ttyACM0\n#canbus_uuid: e51d5c71a901\n### To query can firmware id: ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0\n### For CAN, replace serial with canbus_uuid: and add the id\n\n#####################################################################\n#                            Printer and Acceleration               #\n#####################################################################\n[printer]                       # Printer settings\nkinematics: corexy              # Kinematics: cartesian or corexy, etc.\nmax_velocity: 200               # Max printer speed   \nmax_accel: 2000                 # Max acceleration (max 3000)\nmax_z_velocity: 15              # Max Z speed\nmax_z_accel: 300                # Max Z acceleration\nsquare_corner_velocity: 6.0     # Square corner velocity, lower to reduce inertia\n\n#####################################################################\n#                             Temperature Monitoring                #\n#####################################################################\n[temperature_sensor FLY MCU]      # FLY board temperature\nsensor_type: temperature_mcu      # Link to mcu (default)\n#--------------------------------------------------------------------\n[temperature_sensor FLY-\u03C0]        # Host temperature\nsensor_type: temperature_host     # Link to host\n\n#####################################################################\n#             X/Y Stepper Motor Settings                            # \n#####################################################################\n#   B Motor ---- Motor A \n#   |                  |\n#   |------Extruder-----|\n#   |                  |\n#   |                  |\n#          Front   \n#####################################################################\n#                  X Stepper Motor     X Motor (B Motor)            #\n#####################################################################\n#Note: Test direction after wiring, driver0\n[stepper_x]\nstep_pin: PC13                      # X step pin\ndir_pin: PC1                        # X direction pin, add ! to reverse\nenable_pin: !PA3                    # X enable pin, add ! or motor won't work\nrotation_distance: 40               # Pulley circumference mm (2GT-20T: 40, 2GT-16T: 32)\nmicrosteps: 16                      # Microsteps, higher = better quality, more load\nfull_steps_per_rotation: 200        # Steps per revolution (1.8\xb0: 200, 0.9\xb0: 400)\nendstop_pin: !PA4                   # Endstop pin, normally closed recommended\n#endstop_pin: tmc2209_stepper_x:virtual_endstop  # No endstop\n### Add ! to invert state, prevents crashes if wire breaks\nposition_endstop: 120               # Soft limit max travel (Voron0.1: 120)\nposition_max: 120                   # Mechanical limit max travel (Voron0.1: 120)\nhoming_speed: 50                    # Homing speed, max 100\nhoming_retract_dist: 0              # Retract distance after first trigger\nstep_pulse_duration: 0.000004\n#--------------------------------------------------------------------\n##  Ensure correct driver model (2208 or 2209)\n[tmc2209 stepper_x]                 # X driver config - TMC2209\nuart_pin: PB11                      # UART pin\ninterpolate: False                  # 256 microstep interpolation (True/False)\nrun_current: 0.8                    # Motor run current (A)\nsense_resistor: 0.110               # Do not change\nstealthchop_threshold: 0            # StealthChop threshold (set 0 to disable)\ndiag_pin: ^PA4                      # For sensorless homing, set dip switch on driver\ndriver_SGTHRS: 255                  # MAX sensitivity for sensorless homing, tune as needed\n#--------------------------------------------------------------------\n#[tmc5160 stepper_x]                 # X driver config - TMC5160\n#cs_pin: PB11                        # SPI CS pin\n#spi_bus: spi3                       # SPI bus\n#run_current: 1.0                    # Motor run current\n#interpolate: False                  # 256 microstep interpolation (True/False)\n#sense_resistor: 0.075               # Do not change (0.033 for 5160 Pro)\n#stealthchop_threshold: 500          # StealthChop threshold (set 0 to disable)\n#####################################################################\n#                  Y Stepper Motor     Y Motor (A Motor)            #\n#####################################################################\n#Note: Test direction after wiring, driver1\n[stepper_y]\nstep_pin: PC14                      # Y step pin\ndir_pin: PC4                        # Y direction pin, add ! to reverse\nenable_pin: !PD2                    # Y enable pin, add ! or motor won't work\nrotation_distance: 40               # Pulley circumference mm (2GT-20T: 40, 2GT-16T: 32)\nmicrosteps: 16                      # Microsteps\nfull_steps_per_rotation: 200        # Steps per revolution (1.8\xb0: 200, 0.9\xb0: 400)\nendstop_pin: !PA5                   # Endstop pin, normally closed recommended\n#endstop_pin: tmc2209_stepper_y:virtual_endstop  # No endstop\n### Add ! to invert state, prevents crashes if wire breaks\nposition_endstop: 120               # Soft limit max travel (Voron0.1: 120)\nposition_max: 120                   # Mechanical limit max travel (Voron0.1: 120)\nhoming_speed: 50                    # Homing speed, max 100\nhoming_retract_dist: 0              # Retract distance after first trigger\nstep_pulse_duration: 0.000004\n#--------------------------------------------------------------------\n##  Ensure correct driver model (2208 or 2209)\n[tmc2209 stepper_y]                 # Y driver config - TMC2209\nuart_pin: PC10                      # UART pin\ninterpolate: False                  # 256 microstep interpolation (True/False)\nrun_current: 0.8                    # Motor run current (A)\nsense_resistor: 0.110               # Do not change\nstealthchop_threshold: 0            # StealthChop threshold (set 0 to disable)\ndiag_pin: ^PA5                      # For sensorless homing, set dip switch on driver\ndriver_SGTHRS: 255                  # MAX sensitivity for sensorless homing, tune as needed\n\n#--------------------------------------------------------------------\n#[tmc5160 stepper_y]                 # Y driver config - TMC5160\n#cs_pin: PC10                        # SPI CS pin\n#spi_bus: spi3                       # SPI bus\n#run_current: 1.0                    # Motor run current\n#interpolate: False                  # 256 microstep interpolation (True/False)\n#sense_resistor: 0.075               # Do not change (0.033 for 5160 Pro)\n#stealthchop_threshold: 0            # StealthChop threshold (set 0 to disable)\n\n#####################################################################\n#                           Z Stepper Motor                         #\n#####################################################################\n#Note: Test direction after wiring, driver2\n[stepper_z]\nstep_pin: PC15                 # Z step pin\ndir_pin: !PC5                  # Z direction pin, add ! to reverse\nenable_pin: !PC12              # Z enable pin, add ! or motor won't work\n### T8x4 leadscrew. One turn moves bed 4mm \n### Adjust according to your leadscrew\nrotation_distance: 8           # Leadscrew pitch\nfull_steps_per_rotation: 200   # Steps per revolution (1.8\xb0: 200, 0.9\xb0: 400)\nmicrosteps: 16                 # Microsteps\nendstop_pin: !PA6              # Endstop pin, normally closed recommended\n## position_endstop is the position (mm) from nozzle to bed at Z endstop trigger\n## Positive = above bed, Negative = below bed\n## Increase position_endstop to move nozzle closer to bed\n## After running Z_ENDSTOP_CALIBRATE, value is stored at end of config\nposition_min: -1.5             # For nozzle cleaning, use around -5\nposition_endstop: 120          # Soft limit max travel (Voron0.1: 120)\nposition_max: 120              # Mechanical limit max travel (Voron0.1: 120)\nhoming_speed: 20               # Homing speed, max 20\nsecond_homing_speed: 3         # Second homing speed, max 10\nhoming_retract_dist: 3         # Retract distance\nstep_pulse_duration: 0.000004\n#--------------------------------------------------------------------\n[tmc2209 stepper_z]\nuart_pin: PB7                  # UART pin\ninterpolate: false             # 256 microstep interpolation\nrun_current: 0.8               # Run current (A)\nsense_resistor: 0.110          # Do not change\nstealthchop_threshold: 0       # StealthChop threshold (set 0 to disable)\n#--------------------------------------------------------------------\n#[tmc5160 stepper_z]            # Z driver config - TMC5160\n#cs_pin: PB7                    # SPI CS pin\n#spi_bus: spi3                  # SPI bus\n#run_current: 1.0               # Motor run current\n#interpolate: False             # 256 microstep interpolation (not recommended)\n#sense_resistor: 0.075          # Do not change (0.033 for 5160 Pro)\n#stealthchop_threshold: 500     # StealthChop threshold (set 0 to disable)\n\n#####################################################################\n#                     E0 Extruder Settings                          # \n#####################################################################\n#Note: Test direction after wiring, driver3\n[extruder]                         # Extruder\nstep_pin: PC3                       # Step pin\ndir_pin: PC8                        # Direction pin\nenable_pin: !PC11                   # Enable pin\n## Update the following values after extruder calibration\n## For example, if you request 100mm but get 102mm:\n## rotation_distance = <old> * <actual> / <requested>\n## Example: 22.44 = 22 * 102 / 100\nrotation_distance: 22.23            # Steps per mm\ngear_ratio: 50:10                   # Gear ratio (Galileo: 7.5:1, BMG: 50:17)\nmicrosteps: 16                      # Microsteps\nfull_steps_per_rotation: 200        # Steps per revolution (200 for 1.8\xb0, 400 for 0.9\xb0)\nnozzle_diameter: 0.400              # Nozzle diameter\nfilament_diameter: 1.75             # Filament diameter\nheater_pin: PA0                     # Heater pin (HETA0)\nsensor_type: ATC Semitec 104GT-2    # Sensor type (generic 3950, ATC Semitec 104GT-2, PT1000)\nsensor_pin: PC0                     # Sensor pin  \nmin_temp: 10                        # Min temp (shutdown if exceeded)\nmax_temp: 350                       # Max temp (shutdown if exceeded)\nmax_power: 1.0                      # Max power\nmin_extrude_temp: 170               # Min extrude temp\npressure_advance: 0.00              # Pressure advance (keep below 1.0)\npressure_advance_smooth_time: 0.040 # Smooth time (default 0.040)\n#Pressure advance tuning: https://www.klipper3d.org/Pressure_Advance.html\n#max_extrude_only_distance: 200.0   # Uncomment if needed\n#Nozzle PID tune:  \"PID_CALIBRATE HEATER=extruder TARGET=245\"\ncontrol = pid                # PID control (commented after tuning)\npid_kp = 26.213              # PID Kp (commented after tuning)\npid_ki = 1.304               # PID Ki (commented after tuning)\npid_kd = 131.721             # PID Kd (commented after tuning)\nstep_pulse_duration: 0.000004\n#--------------------------------------------------------------------\n[tmc2209 extruder]                 # Extruder driver config - TMC2209\nuart_pin: PB6                       # UART pin\ninterpolate: False                  # 256 microstep interpolation (True/False)\nrun_current: 0.8                    # Run current (A)\nsense_resistor: 0.110               # Do not change\nstealthchop_threshold: 500          # StealthChop threshold (set 0 to disable)\n#--------------------------------------------------------------------\n#[tmc5160 extruder]                  # Extruder driver config - TMC5160\n#cs_pin: PB6                         # SPI CS pin\n#spi_bus: spi3                       # SPI bus\n#run_current: 1.0                    # Motor run current\n#interpolate: False                  # 256 microstep interpolation (True/False)\n#sense_resistor: 0.075               # Do not change (0.033 for 5160 Pro)\n#stealthchop_threshold: 500          # StealthChop threshold (set 0 to disable)\n\n#####################################################################\n#                            Heated Bed Config                      # \n#####################################################################\n[heater_bed]\nheater_pin: PA2              # Bed heater pin\nsensor_type: Generic 3950    # Sensor type (generic 3950, ATC Semitec 104GT-2, PT1000)\nsensor_pin: PC2              # Bed sensor pin\nsmooth_time: 3.0\nmax_power: 1.0               # Bed power\nmin_temp: 0                  # Min temp (shutdown if exceeded)\nmax_temp: 120                # Max temp (shutdown if exceeded)\n# Bed PID tune:  \"PID_CALIBRATE HEATER=heater_bed TARGET=100\"\ncontrol: pid                # PID control (commented after tuning)\npid_kp: 68.453              # PID Kp (commented after tuning)\npid_ki: 2.749               # PID Ki (commented after tuning)\npid_kd: 426.122             # PID Kd (commented after tuning)\n\n#####################################################################\n#                            Fan Config                             # \n#####################################################################\n[fan]                        # Model cooling fan \npin: PC6                     # Signal pin\nkick_start_time: 0.5         # Startup time\noff_below: 0.13              # Do not change\ncycle_time: 0.010\n#--------------------------------------------------------------------\n[heater_fan hotend_fan]      # Hotend cooling fan\npin: PC7                     # Signal pin\nmax_power: 1.0               # Max speed\nkick_start_time: 0.5         # Startup time\nheater: extruder             # Linked device\nheater_temp: 50              # Fan turns on at this temp\n#fan_speed: 1.0              # Fan speed\n#--------------------------------------------------------------------\n#Fly Gemini has another controllable fan header (5V only, on HOST mcu). For 24V fan, use always-on header.\n# [controller_fan MCU_fan]\n# pin: host:gpiochip0/gpio3 \n# max_power: 1.0\n# kick_start_time: 0.5\n# heater: extruder\n# #fan_speed: 1.0 \n\n#####################################################################\n# Homing and Gantry Adjustment Routines\n#####################################################################\n[homing_override]\naxes: xyz\nset_position_z: 0\ngcode:\n    G90\n    G0 Z5 F600\n    {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}\n\n    {% if home_all or 'X' in params %}\n        _HOME_X\n    {% endif %}\n    \n    {% if home_all or 'Y' in params %}\n        _HOME_Y\n    {% endif %}\n    \n    {% if home_all or 'Z' in params %}\n        _HOME_Z\n    {% endif %}\n\n#[safe_z_home]                      Only needed if using V0.0 or V0.1 Z endstop location\n#home_xy_position: 120,120\n#speed: 50.0\n#z_hop: 5\n\n## To be used with BED_SCREWS_ADJUST\n[bed_screws]\nscrew1: 60,5\nscrew1_name: front screw\nscrew2: 5,115\nscrew2_name: back left\nscrew3: 115,115\nscrew3_name: back right\nProbe_height: 0.1\n\n#####################################################################\n#                                    Neopixel\n#####################################################################\n\n[neopixel board_rgb]\npin: PA9\nchain_count: 1\ncolor_order: GRB\ninitial_RED: 0.0\ninitial_GREEN: 0.1\ninitial_BLUE: 0.0\n\n#####################################################################\n#                      FLY-Mini 12864 LCD                           #\n#####################################################################\n[board_pins]\naliases:\n    # EXP1 header\n    EXP1_1=PC9,  EXP1_3=PA13,  EXP1_5=PA9,   EXP1_7=<NC>,  EXP1_9=<GND>,\n    EXP1_2=PB10,  EXP1_4=PA10,  EXP1_6=PA8,   EXP1_8=<NC>,  EXP1_10=<5V>,\n    # EXP2 header\n    EXP2_1=PB14, EXP2_3=PA15,  EXP2_5=PA14,  EXP2_7=PA7,  EXP2_9=<GND>,\n    EXP2_2=PB13, EXP2_4=PB12,  EXP2_6=PB15,  EXP2_8=<RST>, EXP2_10=<NC>,\n#--------------------------------------------------------------------\n#[display]\n#lcd_type: uc1701                # Display driver type\n#cs_pin: EXP1_3                  # CS pin\n#a0_pin: EXP1_4                  # A0 pin\n#rst_pin: EXP1_5                 # Reset pin\n#contrast: 63                    # Contrast\n#encoder_pins: ^EXP2_5, ^!EXP2_3 # Encoder pins\n#click_pin: ^!EXP1_2             # Encoder click pin\n#spi_bus: spi1                   # SPI bus\n#--------------------------------------------------------------------\n#####For FLY Mini12864\n#[neopixel fly_mini12864]\n#pin: EXP1_6                     # Backlight pin\n#chain_count: 3\n#initial_RED: 1.0                # Red LED brightness (0-1)\n#initial_GREEN: 1.0              # Green LED brightness (0-1)\n#initial_BLUE: 1.0               # Blue LED brightness (0-1)\n#color_order: RGB                # Color order\n\n#####################################################################\n#                          Idle Bed Shutdown\n#####################################################################\n[idle_timeout]\ntimeout: 1800                # Turn off bed after 30 minutes idle\n\n#####################################################################\n#                           Custom G-code Macros                    #\n#####################################################################\n[gcode_macro PRINT_START]          # Macro for print start actions\ngcode:\n    G92 E0                         # Reset extruder\n    G28                            # Home all axes\n    G1 Z20 F3000                   # Raise gantry\n    #SET_LED LED=LEDlight RED=0.2 GREEN=0.2 BLUE=0.5   # LED control\n    #M117 Printing                 # Display message\n    \n#--------------------------------------------------------------------\n[gcode_macro PRINT_HUAXIAN]        # Macro for pre-print actions\ngcode:\n    G1 Z5 F3000 \n    G92 E0;              # Reset extruder\n    G90                  # Absolute positioning\n    G0 X5 Y1 F6000       # Move to x5 y1 at 100mm/s\n    G0 Z0.4              # Move Z to 0.4\n    G91                  # Relative positioning\n    G1 X100 E20 F1200;   # Move X 100mm and extrude\n    G1 Y1                # Move Y 1mm\n    G1 X-100 E20 F1200;  # Move X -100mm and extrude\n    G0 z5                # Raise Z 5mm\n    G1 E-5.0 F3600       # Retract filament\n    G92 E0;              # Reset extruder\n    G90                  # Absolute positioning \n\n#--------------------------------------------------------------------\n[gcode_macro PRINT_END]            # Macro for print end actions\ngcode:\n    #   Get Boundaries\n    {% set max_x = printer.configfile.config[\"stepper_x\"][\"position_max\"]|float %}\n    {% set max_y = printer.configfile.config[\"stepper_y\"][\"position_max\"]|float %}\n    {% set max_z = printer.configfile.config[\"stepper_z\"][\"position_max\"]|float %}\n    \n    #   Check end position to determine safe directions to move\n    {% if printer.toolhead.position.x < (max_x - 20) %}\n        {% set x_safe = 20.0 %}\n    {% else %}\n        {% set x_safe = -20.0 %}\n    {% endif %}\n\n    {% if printer.toolhead.position.y < (max_y - 20) %}\n        {% set y_safe = 20.0 %}\n    {% else %}\n        {% set y_safe = -20.0 %}\n    {% endif %}\n\n    {% if printer.toolhead.position.z < (max_z - 2) %}\n        {% set z_safe = 2.0 %}\n    {% else %}\n        {% set z_safe = max_z - printer.toolhead.position.z %}\n    {% endif %}\n    \n    M400                              # Wait for buffer to clear\n    G92 E0                            # Reset extruder\n    G1 E-10.0 F3600                   # Retract filament\n    G91                               # Relative positioning\n    G0 Z{z_safe} F3600               # Raise gantry\n    G0 X{x_safe} Y{y_safe} F20000    # Move nozzle to remove stringing\n    M104 S0                           # Turn off hotend\n    M140 S0                           # Turn off bed\n    M106 S0                           # Turn off fan\n    G90                               # Absolute positioning\n    G0 X{max_x / 2} Y{max_y} F3600   # Move nozzle to rear\n    BED_MESH_CLEAR                   # Unload mesh bed\n#--------------------------------------------------------------------    \n[gcode_macro LOAD_FILAMENT]\ngcode:\n    M83                            ; set extruder to relative\n    G1 E30 F300                    ; load\n    G1 E15 F150                    ; prime nozzle\n    M82                            ; set extruder to absolute\n    \n[gcode_macro UNLOAD_FILAMENT]\ngcode:\n    M83                            ; set extruder to relative\n    G1 E10 F300                    ; extrude to soften tip\n    G1 E-40 F1800                  ; retract filament\n    M82                            ; set extruder to absolute\n#--------------------------------------------------------------------\n[gcode_macro _HOME_X]\ngcode:\n    # Use consistent run_current on A/B steppers during sensorless homing\n    {% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}\n    {% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}\n    {% set HOME_CURRENT_RATIO = 0.7 %} # Lower current during homing, adjust if skipping\n    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT_RATIO * RUN_CURRENT_X}\n    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT_RATIO * RUN_CURRENT_Y}\n\n    # Home\n    G28 X\n    # Move away\n    G91\n    G1 X-10 F1200\n    \n    # Wait a second (clear StallGuard registers)\n    G4 P1000\n    G90\n    # Restore current\n    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}\n    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}\n#--------------------------------------------------------------------\n[gcode_macro _HOME_Y]\ngcode:\n    # Set current for sensorless homing\n    {% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}\n    {% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}\n    {% set HOME_CURRENT_RATIO = 0.7 %} # Lower current during homing, adjust if skipping\n    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT_RATIO * RUN_CURRENT_X}\n    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT_RATIO * RUN_CURRENT_Y}\n\n    # Home\n    G28 Y\n    # Move away\n    G91\n    G1 Y-10 F1200\n\n    # Wait a second (clear StallGuard registers)\n    G4 P1000\n    G90\n    # Restore current\n    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}\n    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}\n#--------------------------------------------------------------------\n[gcode_macro _HOME_Z]\ngcode:\n    G90\n    G28 Z\n    G1 Z30\n"})})]})}function _(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},50065:function(e,n,t){t.d(n,{Z:()=>a,a:()=>s});var r=t(67294);let o={},i=r.createContext(o);function s(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);
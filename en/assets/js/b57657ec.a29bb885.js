"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["99654"],{50065:function(n,e,t){t.d(e,{Z:()=>a,a:()=>s});var r=t(67294);let o={},i=r.createContext(o);function s(n){let e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(i.Provider,{value:e},n.children)}},9297:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>s,default:()=>l,contentTitle:()=>a,assets:()=>p,toc:()=>_,metadata:()=>r});var r=JSON.parse('{"id":"ProductDoc/MainBoard/fly-pro/fly-pro-x10/cfg","title":"Klipper Reference Configuration","description":"","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-pro/fly-pro-x10/cfg.mdx","sourceDirName":"ProductDoc/MainBoard/fly-pro/fly-pro-x10","slug":"/ProductDoc/MainBoard/fly-pro/fly-pro-x10/cfg","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/cfg","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/cfg.mdx","tags":[],"version":"current","lastUpdatedBy":"xishangyue","lastUpdatedAt":1746004502000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"sidebar_label":"Klipper Reference Configuration"},"sidebar":"tutorialSidebar","previous":{"title":"Main Board Wiring","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/wiring"},"next":{"title":"CSI Camera Usage","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-pro/fly-pro-x10/csi"}}'),o=t(85893),i=t(50065);let s={sidebar_position:6,sidebar_label:"Klipper Reference Configuration"},a="Klipper Reference Configuration",p={},_=[];function c(n){let e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"klipper-reference-configuration",children:"Klipper Reference Configuration"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cfg",children:"####################################################################################\n#                         3D MELLOW / (Add as needed)                             #\n####################################################################################\n## Fly-PRO_X10 Documentation: https://mellow.klipper.cn/#/board/fly_pro/README\n## Fly-PRO_X10 Schematic: https://mellow.klipper.cn/#/board/fly_pro/schematic\n## FLY Official Taobao Store: https://shop126791347.taobao.com/shop/view_shop.htm?spm=a230r.1.14.4.1a4840a8hyvpPJ&user_number_id:2464680006\n## For after-sales, please contact Taobao customer service\n## FLY After-sales Technical Support Group: 621032883\n## FLY-RRF Firmware Group: 786561979\n\n#####################################################################\n#                               Notes                               #\n#####################################################################\n##***Items to change/check:***\n## MCU path                                [mcu]\n## Printer movement range                   xyz position\n## Thermistor type                          [extruder] and [heater_bed]\n## Z endstop position                       [safe_z_home]\n## Z endstop offset                         [stepper_z]\n## PID tuning                               [extruder] and [heater_bed]\n## Extruder stepper fine-tuning             [extruder]\n\n#####################################################################\n#                               File Includes                       #\n#####################################################################\n#[include fluidd.cfg]          # FLUIDD include file.\n#[include mainsail.cfg]        # MAINSDIL include file.\n#Determine which file to use\n\n#####################################################################\n#                               Mainboard Configuration             #\n#####################################################################\n[mcu]                           # FLY board ID\nserial: /dev/serial/by-id/usb-Klipper_stm32h723xx_MELLOW-if00\n### To check USB firmware id: ls /dev/serial/by-id/\n### Replace /dev/serial/by-id/usb-Klipper_stm32f407xx_XXXXXXXXXXXXXXXXXXXXX with your id\n# canbus_uuid: 87ecc744787b\n### To check CAN firmware id: ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0\n### For CAN, replace serial with canbus_uuid: and add the id\n\n#####################################################################\n#                            Printer and Acceleration               #\n#####################################################################\n[printer]                       # Printer settings\nkinematics: corexy              # Kinematics: cartesian or corexy, etc.\nmax_velocity: 300               # Max printer speed\nmax_accel: 10000                # Max acceleration (max 3000)\nmax_z_velocity: 10              # Max Z speed\nmax_z_accel: 1000               # Max Z acceleration\nsquare_corner_velocity: 5.0     # Square corner velocity, lower to reduce inertia\n\n#####################################################################\n#                             Temperature Monitoring                #\n#####################################################################\n[temperature_sensor Fly-C8]    # FLY board temperature\nsensor_type: temperature_mcu      # Linked to mcu (default)\n#####################################################################\n# [temperature_sensor RPI]        # Host temperature\n# sensor_type: temperature_host     # Linked to host\n\n#####################################################################\n#                              Bed Mesh Calibration\n#####################################################################\n[bed_mesh]\nspeed: 50                    # Calibration speed\nhorizontal_move_z: 5         # Z lift before moving to next point\nmesh_min: 30,30              # Min calibration point (x, y)\nmesh_max: 270, 270           # Max calibration point (x, y)\nprobe_count: 4,4             # Sample points (4x4 = 16 points)\nmesh_pps: 2,2                # Additional sample points\nalgorithm: bicubic           # Algorithm model\nbicubic_tension: 0.2         # Do not change\n\n#####################################################################\n#             X/Y Stepper Settings                                  #\n#####################################################################\n#                   z1                 z2\n#                       B__________A\n#\n#\n#\n#                   Z0     12864      Z3\n\n#####################################################################\n#                  X Stepper Motor      (DRIVER0)                   #\n#####################################################################\n## DRIVER0 motor position\n[stepper_x]\nstep_pin: PE7                       # X step pin\ndir_pin: !PG11                      # X direction pin, add ! to reverse\nenable_pin: !PG10                   # X enable pin, add ! or motor won't work\nrotation_distance: 40               # Pulley circumference mm (2GT-20T: 40, 2GT-16T: 32)\nmicrosteps: 16                      # Microsteps, higher = better quality, more load\nfull_steps_per_rotation: 200        # Steps per revolution (1.8\xb0: 200, 0.9\xb0: 400)\nendstop_pin: PD9                    # Endstop pin, normally closed recommended\n# endstop_pin: tmc2209_stepper_x:virtual_endstop\n# endstop_pin: tmc5160_stepper_x:virtual_endstop\n### Add ! to reverse state if needed, prevents crashes if wire breaks\nposition_min: 0                     # Min soft limit\nposition_endstop: 300               # Max soft limit (250mm-300mm-350mm)\nposition_max: 300                   # Max mechanical limit (250mm-300mm-350mm)\nhoming_speed: 200                   # Homing speed (max 100)\nhoming_retract_dist: 0              # Retract distance after first trigger\n#####################################################################\n##  Ensure correct driver type (2208 or 2209)\n# [tmc2209 stepper_x]                 # x driver config - TMC2209\n# uart_pin: PG12\n# interpolate: False\n# run_current: 0.8\n# sense_resistor: 0.110\n# stealthchop_threshold: 0\n#####################################################################\n[tmc5160 stepper_x]\ncs_pin: PG12\nspi_bus: spi1\nrun_current: 1.3\ninterpolate: False\nsense_resistor: 0.075               # Use 0.033 for 5160 Pro\nstealthchop_threshold: 0\n# diag0_pin: ^!PG8\n# driver_SGT: 1\n#####################################################################\n#                  Y Stepper Motor      (DRIVER1)                   #\n#####################################################################\n## DRIVER1 motor position\n[stepper_y]\nstep_pin: PE8\ndir_pin: !PE14\nenable_pin: !PE13\nrotation_distance: 40\nmicrosteps: 16\nfull_steps_per_rotation: 200\nendstop_pin: !PG7\n# endstop_pin: tmc2209_stepper_y:virtual_endstop\n# endstop_pin: tmc5160_stepper_y:virtual_endstop\nposition_min: 0\nposition_endstop: 300\nposition_max: 300\nhoming_speed: 150\nhoming_retract_dist: 0\n#####################################################################\n##  Ensure correct driver type (2209 or 5160)\n# [tmc2209 stepper_y]\n# uart_pin: PE15\n# interpolate: False\n# run_current: 0.8\n# sense_resistor: 0.110\n# stealthchop_threshold: 0\n#####################################################################\n[tmc5160 stepper_y]\ncs_pin: PE15\nspi_bus: spi1\nrun_current: 1.0\ninterpolate: False\nsense_resistor: 0.075\nstealthchop_threshold: 0\n# diag0_pin: ^!PG7\n# driver_SGT: 1\n#####################################################################\n#                     Z Stepper Motors                              #\n#####################################################################\n## DRIVER2 motor position\n[stepper_z]\nstep_pin: PE9\ndir_pin: !PG1\nenable_pin: !PG0\nrotation_distance: 40\ngear_ratio: 80:16\nmicrosteps: 32\nendstop_pin: !PG6\n# endstop_pin: probe:z_virtual_endstop\nposition_max: 290\nposition_endstop:0\nposition_min: -5\nhoming_speed: 50\nsecond_homing_speed: 10\nhoming_retract_dist: 0\n[tmc5160 stepper_z]\ncs_pin: PE12\nspi_bus: spi1\nrun_current: 0.8\ninterpolate: False\nsense_resistor: 0.075\nstealthchop_threshold: 0\n######################################################################\n## DRIVER4 motor position\n[stepper_z1]\nstep_pin: PE10\ndir_pin: PF14\nenable_pin: !PF13\nrotation_distance: 40\ngear_ratio: 80:16\nmicrosteps: 32\n[tmc5160 stepper_z1]\ncs_pin: PF15\nspi_bus: spi1\nrun_current: 0.8\ninterpolate: False\nsense_resistor: 0.075\nstealthchop_threshold: 0\n#####################################################################\n## DRIVER5 motor position\n[stepper_z2]\nstep_pin: PE11\ndir_pin: !PF11\nenable_pin: !PB2\nrotation_distance: 40\ngear_ratio: 80:16\nmicrosteps: 32\n[tmc5160 stepper_z2]\ncs_pin: PF12\nspi_bus: spi1\nrun_current: 0.8\ninterpolate: False\nsense_resistor: 0.075\nstealthchop_threshold: 0\n######################################################################\n## DRIVER6 motor position\n######################################################################\n[stepper_z3]\nstep_pin: PE2\ndir_pin: PF10\nenable_pin: !PC0\nrotation_distance: 40\ngear_ratio: 80:16\nmicrosteps: 32\n[tmc5160 stepper_z3]\ncs_pin: PF5\nspi_bus: spi1\nrun_current: 0.8\ninterpolate: False\nsense_resistor: 0.075\nstealthchop_threshold: 0\n\n#####################################################################\n#                             Extruder Configuration\n#####################################################################\n[extruder]\nstep_pin:PE3\ndir_pin:PF2\nenable_pin: !PF4\nmicrosteps: 16\nfull_steps_per_rotation: 200\nrotation_distance: 22.52245\n# Calibrate steps: rotation_distance : <old_rotation_distance> * <actual_extrude_length> / <requested_extrude_length>\ngear_ratio: 50:10\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: PF8\nsensor_type: Generic 3950\nsensor_pin: PB0\nmax_power: 1.0\nmin_temp: -235\nmax_temp: 350\nmin_extrude_temp: 150\npressure_advance: 0.04\npressure_advance_smooth_time:0.040\n# Nozzle PID tune: \"PID_CALIBRATE HEATER:extruder TARGET:245\ncontrol : pid\npid_kp : 26.213\npid_ki : 1.304\npid_kd : 131.721\n[tmc2209 extruder]\nuart_pin:PF1\ninterpolate: False\nrun_current: 0.6\nsense_resistor: 0.110\nstealthchop_threshold: 0\n#######################################################################\n[verify_heater extruder]\nmax_error: 20\ncheck_gain_time:120\nhysteresis: 50\nheating_gain: 2\n\n#####################################################################\n#      FAN\n#####################################################################\n####4-wire fan reference config\n[fan]\npin:PB10\nmax_power: 1.0\ntachometer_pin: ^PD15\n#####################################################################\n# [fan]\n# pin:PA3\n# max_power: 1.0\n# tachometer_pin: ^PD14\n#####################################################################\n[heater_fan Throat_Cooling]         # Throat cooling fan\npin:PA1\nmax_power: 1.0\nkick_start_time: 0.5\nheater: extruder\nheater_temp: 50\nfan_speed: 1.0\n#####################################################################\n[heater_fan Bed_Fan]                # Electronics bay fan\npin: PA15\nmax_power: 1.0\nshutdown_speed: 0.0\nkick_start_time: 5.0\nheater: heater_bed\nheater_temp: 50\nfan_speed: 1.0\n\n#####################################################################\n#                           Idle Bed Shutdown\n#####################################################################\n[idle_timeout]\ntimeout: 1800                # Turn off bed after 30 min idle\n\n#####################################################################\n#                           Bed Leveling Probe\n#####################################################################\n# Default PL08N probe should not be lower than nozzle, only for leveling.\n# If your PL08N is NO (normally open), add ! to the pin.\n[probe]\npin: ^PD10\nx_offset: 0\ny_offset: 25.0\nz_offset: 0\nspeed: 10.0\nsamples: 3\nsamples_result: median\nsample_retract_dist: 4.0\nsamples_tolerance: 0.007\nsamples_tolerance_retries: 3\n#####################################################################\n#[bltouch]\n#sensor_pin: ^PC3\n#control_pin: PC6\n#x_offset: 0\n#y_offset: 25.0\n#z_offset: 0\n\n#####################################################################\n#                               Homing\n#####################################################################\n[safe_z_home]\nhome_xy_position:150,150\nspeed:100\nz_hop:10\n#####################################################################\n#[homing_override]\n#axes: z\n#set_position_z: 0\n#gcode:\n#   G90\n#   G0 Z15 F600\n#   G28 X Y\n#    ## Z endstop XY position\n#    ## Update X0 and Y0 to your values (e.g. X157, Y305)\n#    ## Z endstop position\n#   G0 X185 Y250 F3600    #250mm\n#   G28 Z\n#   G0 Z10 F1800\n\n#####################################################################\n#                           4Z Leveling\n#####################################################################\n[quad_gantry_level]          # 300mm machine leveling params\n#gantry_corners:\n#    -60,-10\n#    310,320\n#points:                      # 250mm machine leveling points\n#    50,25\n#    50,175\n#    200,175\n#    200,25\n#####################################################################\ngantry_corners:\n    -60,-10\n    360,370\npoints:\n    50,25\n    50,225\n    250,225\n    250,25\n#####################################################################\n#gantry_corners:              # 350mm machine leveling points\n#    -60,-10\n#    410,420\n#points:\n#    50,25\n#    50,275\n#    300,275\n#    300,25\n#####################################################################\nspeed: 100\nhorizontal_move_z: 10\nretry_tolerance: 0.0075\nretries: 5\nmax_adjust: 10\n[force_move]\nenable_force_move: true\n\n#####################################################################\n#      LED Driver\n#####################################################################\n[neopixel TP_led]\npin: PA8\nchain_count: 50\ncolor_order: GRB\ninitial_RED: 0\ninitial_GREEN: 0\ninitial_BLUE: 0\ninitial_WHITE: 0.0\n\n#####################################################################\n#                           Custom gcode Macros\n#####################################################################\n[gcode_macro PRINT_START]\ngcode:\n     G92 E0\n     BED_MESH_CLEAR\n     G28\n     clean_nozzle\n     QUAD_GANTRY_LEVEL\n     G28\n     G1 Z20 F3000\n     clean_nozzle\n     BED_MESH_PROFILE LOAD:default\n\n[gcode_macro PRINT_huaxian]\ngcode:\n     G1 Z5 F3000\n     G92 E0\n     G90\n     G0 X5 Y1 F6000\n     G0 Z0.4\n     G91\n     G1 X100 E20 F1200\n     G1 Y1\n     G1 X-100 E20 F1200\n     G0 z5\n     G92 E0\n     G90\n#####################################################################\n[gcode_macro PRINT_END]\ngcode:\n     M400\n     G92 E0\n     G1 E-10.0 F3600\n     G91\n     G0 Z1.00 X20.0 Y20.0 F6000\n     TURN_OFF_HEATERS\n     M107\n     G1 Z2 F3000\n     G90\n     G0  X150 Y280 F3600\n     BED_MESH_CLEAR\n\n"})})]})}function l(n={}){let{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}}}]);
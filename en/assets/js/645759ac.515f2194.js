"use strict";(self.webpackChunkklipper_docs=self.webpackChunkklipper_docs||[]).push([["67333"],{44641:function(e,n,i){i.d(n,{ZP:()=>d,d$:()=>r});var s=i(85893),t=i(50065);let r=[{value:"Search CAN ID",id:"search-can-id",level:2},{value:"Fill in CAN ID",id:"fill-in-can-id",level:2}];function o(e){let n={admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components},{ImageView:r}=n;return r||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ImageView",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"search-can-id",children:"Search CAN ID"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Open the browser and enter the IP address of the host machine in the address bar, for example, if my host machine's IP is ",(0,s.jsx)(n.code,{children:"192.168.101.179"}),", just type it directly and press Enter."]}),"\n",(0,s.jsx)(r,{image:i(27201).Z,size:"80%",align:"center"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Open the host machine's WEB interface, and find in the left sidebar configuration options:"}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For fluidd: ",(0,s.jsx)(n.code,{children:"{\u2026}"}),", click to enter, you can find ",(0,s.jsx)(n.code,{children:"printer.cfg"})]}),"\n"]}),(0,s.jsx)(r,{image:i(531).Z,size:"100%",align:"center"})]}),(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For mainsail: ",(0,s.jsx)(n.code,{children:"Machine"}),", click to enter, you can find ",(0,s.jsx)(n.code,{children:"printer.cfg"})]}),"\n"]}),(0,s.jsx)(r,{image:i(2337).Z,size:"100%",align:"center"})]})]})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.code,{children:"printer.cfg"})," after entering, then click ",(0,s.jsx)(n.code,{children:"DEVICES"})," on the top right"]}),"\n"]}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(r,{image:i(31253).Z,size:"100%",align:"center"})}),(0,s.jsx)("td",{children:(0,s.jsx)(r,{image:i(6085).Z,size:"100%",align:"center"})})]})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.code,{children:"CAN"}),", then refresh"]}),"\n"]}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Refresh for fluidd"}),"\n"]}),(0,s.jsx)(r,{image:i(29848).Z,size:"100%",align:"center"})]}),(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Refresh for mainsail"}),"\n"]}),(0,s.jsx)(r,{image:i(23416).Z,size:"100%",align:"center"})]})]})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:"Copy the ID, click the arrow to copy"}),"\n"]}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In fluidd, make sure the first arrow points to ",(0,s.jsx)(n.code,{children:"Klipper"}),", if so, click the right arrow to copy"]}),"\n"]}),(0,s.jsx)(r,{image:i(81408).Z,size:"100%",align:"center"})]}),(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In mainsail, make sure the first arrow points to ",(0,s.jsx)(n.code,{children:"Klipper"}),", if so, click the right arrow to copy"]}),"\n"]}),(0,s.jsx)(r,{image:i(66732).Z,size:"100%",align:"center"})]})]})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"fill-in-can-id",children:"Fill in CAN ID"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Close ",(0,s.jsx)(n.code,{children:"DEVICES"})," and fill in the ID"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Notice",type:"danger",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The # before the first red box needs to be deleted, please note that this includes spaces, then change ",(0,s.jsx)(n.code,{children:"serial:"})," to ",(0,s.jsx)(n.code,{children:"canbus_uuid:"})]}),"\n",(0,s.jsxs)(n.li,{children:["FLY system default configuration may contain ",(0,s.jsx)(n.code,{children:"[MCU]"}),", but if the ID below is ",(0,s.jsx)(n.code,{children:"serial: /tmp/klipper_host_mcu"}),", rename ",(0,s.jsx)(n.code,{children:"[MCU]"})," to ",(0,s.jsx)(n.code,{children:"[mcu HOST]"}),", or delete these two lines"]}),"\n",(0,s.jsxs)(n.li,{children:["You can copy the following ",(0,s.jsx)(n.code,{children:"canbus_uuid:"})]}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cfg",children:"[mcu]\ncanbus_uuid:\n"})}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Find [MCU] in fluidd"}),"\n"]}),(0,s.jsx)(r,{image:i(24712).Z,size:"100%",align:"center"})]}),(0,s.jsxs)("td",{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Find [MCU] in mainsail"}),"\n"]}),(0,s.jsx)(r,{image:i(8691).Z,size:"100%",align:"center"})]})]})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Fill in the ID in the configuration"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["After filling in the ID, click ",(0,s.jsx)(n.code,{children:"SAVE & RESTART"})," on the top right"]}),"\n"]})}),"\n",(0,s.jsx)("table",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(r,{image:i(59401).Z,size:"100%",align:"center"})}),(0,s.jsx)("td",{children:(0,s.jsx)(r,{image:i(14564).Z,size:"100%",align:"center"})})]})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["If Klipper prompts ",(0,s.jsx)(n.code,{children:"ADC out of range"}),", this is a normal phenomenon. Connect the heated bed and thermistor to the motherboard, configure the thermistor pins for the nozzle and heated bed, then save and restart."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"Notice: All IDs mentioned in the document are examples, and each motherboard's ID is different. Please fill in the actual obtained ID."})}),"\n",(0,s.jsx)(n.hr,{})]})}function d(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},32726:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>o,default:()=>h,toc:()=>c,metadata:()=>s,assets:()=>a,contentTitle:()=>d});var s=JSON.parse('{"id":"ProductDoc/MainBoard/fly-c/fly-c5/canbridge","title":"CAN Bridging","description":"CAN bus is a serial communication protocol bus used for real-time applications, which can transmit signals using twisted pair cables and is one of the most widely used field buses in the world. The CAN protocol is used for communication between various components in vehicles to replace expensive and cumbersome wiring harnesses. The robustness of the protocol has extended its application to other automation and industrial applications. Features of the CAN protocol include complete serial data communication, providing real-time support, transmission rates up to 1Mb/s, 11-bit addressing, and error detection capabilities.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ProductDoc/MainBoard/fly-c/fly-c5/canbridge.mdx","sourceDirName":"ProductDoc/MainBoard/fly-c/fly-c5","slug":"/ProductDoc/MainBoard/fly-c/fly-c5/canbridge","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-c/fly-c5/canbridge","draft":false,"unlisted":false,"editUrl":"https://github.com/kluoyun/fly-docs-next/tree/master/docs/ProductDoc/MainBoard/fly-c/fly-c5/canbridge.mdx","tags":[],"version":"current","lastUpdatedBy":"FengHua741","lastUpdatedAt":1749118797000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"CAN Bridging"},"sidebar":"tutorialSidebar","previous":{"title":"klipper\u53C2\u8003\u914D\u7F6E","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-c/fly-c5/cfg"},"next":{"title":"Klipper Power Loss Resume Functionality","permalink":"/fly-docs-next/en/docs/ProductDoc/MainBoard/fly-c/fly-c5/kppm"}}'),t=i(85893),r=i(50065);i(44641);let o={sidebar_position:10,sidebar_label:"CAN Bridging"},d="CAN Bridging",a={},c=[{value:"Important Tips",id:"important-tips",level:2},{value:"Flashing Mainboard Firmware",id:"flashing-mainboard-firmware",level:2},{value:"Tool Board Connection to Mainboard Using CAN",id:"tool-board-connection-to-mainboard-using-can",level:2}];function l(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components},{Button:s,ImageView:o}=n;return s||u("Button",!0),o||u("ImageView",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"can-bridging",children:"CAN Bridging"})}),"\n",(0,t.jsx)(n.p,{children:"CAN bus is a serial communication protocol bus used for real-time applications, which can transmit signals using twisted pair cables and is one of the most widely used field buses in the world. The CAN protocol is used for communication between various components in vehicles to replace expensive and cumbersome wiring harnesses. The robustness of the protocol has extended its application to other automation and industrial applications. Features of the CAN protocol include complete serial data communication, providing real-time support, transmission rates up to 1Mb/s, 11-bit addressing, and error detection capabilities.\nOn 3D printers, CAN bus is used to reduce the number of wires connecting the print head to the mainboard; originally requiring more than ten wires, only four wires are needed after using CAN, greatly reducing the number of wires and decreasing wiring difficulty.\nThis chapter provides only a brief overview of CAN bridging usage."}),"\n",(0,t.jsx)(n.h2,{id:"important-tips",children:"Important Tips"}),"\n",(0,t.jsx)(n.admonition,{title:"Notice",type:"danger",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The default CAN speed of the FLY system is ",(0,t.jsx)(n.code,{children:"1M"}),"; it is recommended that the tool board and mainboard also have firmware with a ",(0,t.jsx)(n.code,{children:"1M"})," speed."]}),"\n",(0,t.jsxs)(n.li,{children:["The tool board comes with the factory-installed ",(0,t.jsx)(n.code,{children:"Katapult"})," firmware, with a CAN speed of ",(0,t.jsx)(n.code,{children:"1M"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["If the tool board is under the ",(0,t.jsx)(n.code,{children:"Katapult"})," firmware, there will be an LED on the mainboard flashing. This indicates that the ",(0,t.jsx)(n.code,{children:"KLIPPER"})," firmware needs to be flashed; otherwise, normal connection cannot be established."]}),"\n",(0,t.jsxs)(n.li,{children:["Please use a multimeter to measure the resistance value between ",(0,t.jsx)(n.code,{children:"CANH"})," and ",(0,t.jsx)(n.code,{children:"CANL"})," while powered off to ensure it is around ",(0,t.jsx)(n.code,{children:"60\u03A9"}),"."]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"flashing-mainboard-firmware",children:"Flashing Mainboard Firmware"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure that the firmware burned onto the C5 mainboard is the ",(0,t.jsx)(n.code,{children:"USB Bridge CAN Firmware Configuration"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Below is the button for flashing and searching for CAN IDs."}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(s,{variant:"contained",disableElevation:!0,component:"a",rel:"noopener",href:"/docs/ProductDoc/MainBoard/fly-c/fly-c5/flash/can",children:"USB Bridge CAN Firmware Configuration"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tool-board-connection-to-mainboard-using-can",children:"Tool Board Connection to Mainboard Using CAN"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"There are many models of tool boards; this section only introduces the wiring tutorial for the C5."}),"\n",(0,t.jsx)(n.li,{children:"Note that the power line of the tool board is not connected to the CAN port but to the 12V-24V power line."}),"\n",(0,t.jsxs)(n.li,{children:["Note that the ",(0,t.jsx)(n.code,{children:"120\u03A9"})," jumper must be connected."]}),"\n"]}),"\n",(0,t.jsx)(o,{image:i(83228).Z,size:"80%",align:"center"})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}function u(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},531:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd-cfg-d524139d23f497cbd43ddb7dc6ea27d5.webp"},2337:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail-cfg-74cd30fac12470803dd4871196a1bbae.webp"},29848:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd_can-85743f741a9ae4e929bde31fb46d5652.webp"},59401:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd_can_save-cdedc5920f5fbbd6af788e50796bf900.webp"},81408:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd_canid-80ec6560eabc558c646216818514550c.webp"},24712:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd_cfg-9fcadbf7fc6586970dfc4bbdcfa1eb80.webp"},31253:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/fluidd_devices-9e3714ca248ba504bd125147d71aef46.webp"},27201:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/ip-bf5bc34f518d5b7874f0098a1bea13cd.webp"},23416:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail_can-8d9e63b89edb999c69cf3216caa65954.webp"},14564:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail_can_save-ba1cef3bd231232db11ed02f0a0650b6.webp"},66732:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail_canid-e64bad50a715c71a278d0e3b7563c3ee.webp"},8691:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail_cfg-00f65bf6459d0538edc8c8e5e62208d0.webp"},6085:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/mainsail_devices-9bd51fa01949d6b54a98f2ad67b16968.webp"},83228:function(e,n,i){i.d(n,{Z:()=>s});let s=i.p+"assets/images/canbridge-9bb395c1fefde81ef9061c368080119a.webp"},50065:function(e,n,i){i.d(n,{Z:()=>d,a:()=>o});var s=i(67294);let t={},r=s.createContext(t);function o(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);